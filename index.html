<!doctype html>
<html lang="en" class="dark tokyo-night-storm">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#0f1224" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <link rel="apple-touch-icon" href="/icon.svg" />
    <title>Just Calendar</title>
    <style>
      :root {
        --panel: #ffffff;
        --ink: #111827;
        --line: #d4dae4;
        --muted: #eef2f8;
        --bg-top: #f8fafc;
        --bg-bottom: #edf2f9;
        --header-bg: rgba(255, 255, 255, 0.86);
        --card-shadow: 0 8px 22px rgba(15, 23, 42, 0.06);
        --calendar-action-bg: #e8eef9;
        --calendar-action-bg-hover: #dde6f7;
        --calendar-action-bg-active: #d1dcf3;
        --calendar-action-border: rgba(71, 93, 140, 0.38);
        --calendar-action-ink: #23314f;
        --day-cell-hover-bg: rgba(29, 78, 216, 0.1);
        --score-slider-track: color-mix(in srgb, #94a3b8 56%, #e2e8f0 44%);
        --score-slider-active: #4f46e5;
        --score-slider-thumb: #4f46e5;
        --score-slider-thumb-contrast: #f8fafc;
        color-scheme: light;
      }

      :root.dark {
        --panel: #0f172a;
        --ink: #e5e7eb;
        --line: #334155;
        --muted: #1e293b;
        --bg-top: #020617;
        --bg-bottom: #0f172a;
        --header-bg: rgba(2, 6, 23, 0.8);
        --card-shadow: 0 10px 25px rgba(2, 6, 23, 0.5);
        --calendar-action-bg: #1b2538;
        --calendar-action-bg-hover: #243146;
        --calendar-action-bg-active: #2c3d55;
        --calendar-action-border: rgba(148, 163, 184, 0.5);
        --calendar-action-ink: #e8edf9;
        --day-cell-hover-bg: rgba(71, 85, 105, 0.28);
        --score-slider-track: color-mix(in srgb, #0f172a 60%, #334155 40%);
        --score-slider-active: #60a5fa;
        --score-slider-thumb: #60a5fa;
        --score-slider-thumb-contrast: #0b1223;
        color-scheme: dark;
      }

      :root.tokyo-night-storm {
        --panel: #1a1d33;
        --ink: #dde4ff;
        --line: #3a466d;
        --muted: #252b48;
        --bg-top: #0f1224;
        --bg-bottom: #171c34;
        --header-bg: rgba(15, 18, 36, 0.84);
        --card-shadow: 0 10px 25px rgba(8, 11, 24, 0.58);
        --calendar-action-bg: #1a1d33;
        --calendar-action-bg-hover: #252a47;
        --calendar-action-bg-active: #30365a;
        --calendar-action-border: rgba(168, 182, 255, 0.5);
        --calendar-action-ink: #eef2ff;
        --day-cell-hover-bg: rgba(99, 117, 188, 0.28);
        --score-slider-track: color-mix(in srgb, #252b48 68%, #3a466d 32%);
        --score-slider-active: #7aa2f7;
        --score-slider-thumb: #7dcfff;
        --score-slider-thumb-contrast: #171c34;
        color-scheme: dark;
      }

      :root.solarized-dark {
        --panel: #073642;
        --ink: #93a1a1;
        --line: #586e75;
        --muted: #002b36;
        --bg-top: #002b36;
        --bg-bottom: #001f27;
        --header-bg: rgba(0, 43, 54, 0.88);
        --card-shadow: 0 10px 28px rgba(0, 24, 30, 0.7);
        --calendar-action-bg: #0d3f4e;
        --calendar-action-bg-hover: #145060;
        --calendar-action-bg-active: #1b6071;
        --calendar-action-border: rgba(147, 161, 161, 0.55);
        --calendar-action-ink: #d8e2e2;
        --day-cell-hover-bg: rgba(42, 161, 152, 0.24);
        --score-slider-track: color-mix(in srgb, #073642 64%, #586e75 36%);
        --score-slider-active: #2aa198;
        --score-slider-thumb: #2aa198;
        --score-slider-thumb-contrast: #002b36;
        color-scheme: dark;
      }

      :root.solarized-light {
        --panel: #fdf6e3;
        --ink: #586e75;
        --line: #93a1a1;
        --muted: #eee8d5;
        --bg-top: #fdf6e3;
        --bg-bottom: #eee8d5;
        --header-bg: rgba(253, 246, 227, 0.9);
        --card-shadow: 0 8px 22px rgba(88, 110, 117, 0.16);
        --calendar-action-bg: #e7dfca;
        --calendar-action-bg-hover: #dcd2b8;
        --calendar-action-bg-active: #d0c5aa;
        --calendar-action-border: rgba(88, 110, 117, 0.45);
        --calendar-action-ink: #445861;
        --day-cell-hover-bg: rgba(38, 139, 210, 0.1);
        --score-slider-track: color-mix(in srgb, #93a1a1 58%, #eee8d5 42%);
        --score-slider-active: #268bd2;
        --score-slider-thumb: #268bd2;
        --score-slider-thumb-contrast: #fdf6e3;
        color-scheme: light;
      }

      * {
        box-sizing: border-box;
      }

      html {
        background-color: var(--app-bg-bottom, var(--bg-bottom));
        overflow: hidden;
      }

      body {
        margin: 0;
        min-height: 100vh;
        min-height: 100svh;
        overflow: hidden;
        font-family: "Segoe UI", Arial, sans-serif;
        color: var(--ink);
        background-color: var(--app-bg-bottom, var(--bg-bottom));
        background-image: linear-gradient(
          180deg,
          var(--app-bg-top, var(--bg-top)) 0%,
          var(--app-bg-bottom, var(--bg-bottom)) 100%
        );
      }

      #app {
        height: 100vh;
        height: 100svh;
        display: grid;
        grid-template-rows: auto auto 1fr;
      }

      header {
        position: relative;
        z-index: 40;
        padding: 0.85rem 1rem;
        border-bottom: 1px solid var(--line);
        background: var(--header-bg);
        backdrop-filter: blur(6px);
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .brand-logo {
        display: block;
        width: auto;
        height: 2rem;
        max-width: min(68vw, 18rem);
        object-fit: contain;
      }

      #calendar-switcher {
        margin-left: auto;
        position: relative;
        z-index: 44;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.42rem;
        min-width: 2.1rem;
      }

      #header-pinned-calendars {
        display: inline-flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.34rem;
        min-width: 0;
      }

      #header-pinned-calendars:empty {
        display: none;
      }

      .header-pinned-calendar {
        --header-pinned-calendar-color: #3b82f6;
        appearance: none;
        height: 1.9rem;
        min-width: 0;
        border: 1px solid color-mix(in srgb, var(--line) 88%, transparent);
        border-radius: 999px;
        padding: 0 0.58rem;
        display: inline-flex;
        align-items: center;
        gap: 0.38rem;
        color: var(--ink);
        font-size: 0.68rem;
        font-weight: 650;
        letter-spacing: 0.01em;
        background: color-mix(in srgb, var(--panel) 95%, #ffffff 5%);
        box-shadow: 0 1px 5px rgba(15, 23, 42, 0.09);
        opacity: 0.8;
        cursor: pointer;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          box-shadow 0.2s ease,
          opacity 0.16s ease,
          transform 0.16s ease;
      }

      .header-pinned-calendar:hover {
        transform: translateY(-1px);
        opacity: 1;
        border-color: color-mix(
          in srgb,
          var(--line) 56%,
          var(--header-pinned-calendar-color) 44%
        );
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--panel) 84%, var(--header-pinned-calendar-color) 16%) 0%,
          color-mix(in srgb, var(--panel) 95%, #ffffff 5%) 100%
        );
        box-shadow:
          0 3px 8px color-mix(in srgb, #0f172a 80%, transparent),
          0 0 0 1px
            color-mix(in srgb, var(--header-pinned-calendar-color) 28%, transparent);
      }

      .header-pinned-calendar:active {
        transform: translateY(0);
      }

      .header-pinned-calendar:focus-visible {
        outline: 2px solid
          color-mix(in srgb, var(--header-pinned-calendar-color) 64%, #ffffff 36%);
        outline-offset: 2px;
        opacity: 1;
      }

      .header-pinned-calendar .calendar-current-name {
        max-width: 8.25rem;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #header-calendars-btn {
        --active-calendar-color: #3b82f6;
        margin-left: 0;
        height: 2.22rem;
        border: 1px solid
          color-mix(in srgb, var(--line) 62%, var(--active-calendar-color) 38%);
        border-radius: 999px;
        padding: 0 0.86rem;
        display: inline-flex;
        align-items: center;
        gap: 0.48rem;
        font-size: 0.76rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--panel) 86%, var(--active-calendar-color) 14%) 0%,
          color-mix(in srgb, var(--panel) 95%, #ffffff 5%) 100%
        );
        box-shadow:
          0 2px 8px color-mix(in srgb, #0f172a 84%, transparent),
          0 0 0 1px color-mix(in srgb, var(--active-calendar-color) 24%, transparent),
          0 0 14px color-mix(in srgb, var(--active-calendar-color) 22%, transparent);
        cursor: pointer;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          transform 0.16s ease,
          color 0.16s ease,
          box-shadow 0.2s ease;
      }

      #header-calendars-btn::after {
        content: "";
        width: 0.42rem;
        height: 0.42rem;
        border-right: 2px solid currentColor;
        border-bottom: 2px solid currentColor;
        opacity: 0.74;
        margin-left: 0.08rem;
        transform: translateY(calc(-0.06rem - 2px)) rotate(45deg);
        transform-origin: 50% 68%;
        transition:
          transform 0.16s ease,
          opacity 0.16s ease;
      }

      .calendar-current-dot {
        width: 0.768rem;
        height: 0.768rem;
        border-radius: 999px;
        flex: 0 0 0.768rem;
        background: var(--calendar-dot-color, #3b82f6);
      }

      .calendar-current-type-icon.calendar-option-type-icon {
        width: calc(0.82rem + 6px);
        height: calc(0.82rem + 6px);
        flex: 0 0 calc(0.82rem + 6px);
        border-radius: 999px;
      }

      .calendar-current-name {
        line-height: 1;
        white-space: nowrap;
      }

      #theme-switcher {
        position: fixed;
        right: 1rem;
        bottom: 3.9rem;
        z-index: 21;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        min-width: 2.1rem;
      }

      #tweak-controls {
        width: min(920px, calc(100% - 1.3rem));
        margin: 0 auto;
        padding: 0.6rem 0.75rem;
        border: 1px solid var(--line);
        border-radius: 18px;
        background: var(--panel);
        box-shadow: var(--card-shadow);
        display: grid;
        gap: 0.45rem;
        position: fixed;
        left: 0;
        right: 0;
        bottom: calc(env(safe-area-inset-bottom, 0px) + 0.55rem);
        z-index: 120;
        transform: translateY(0);
        opacity: 1;
        transition:
          transform 0.24s cubic-bezier(0.22, 0.61, 0.36, 1),
          opacity 0.2s ease;
      }

      #tweak-controls.is-entering {
        opacity: 0;
        transform: translateY(calc(100% + 1.5rem));
      }

      #tweak-controls[hidden] {
        display: none;
      }

      .tweak-controls-title {
        margin: 0;
        font-size: 0.76rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--ink);
      }

      .tweak-controls-close {
        display: none;
        position: absolute;
        top: 0.46rem;
        right: 0.48rem;
        width: 1.8rem;
        height: 1.8rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        background: var(--panel);
        color: var(--ink);
        font-size: 1rem;
        font-weight: 700;
        line-height: 1;
        padding: 0;
        cursor: pointer;
      }

      .tweak-controls-close:active {
        transform: scale(0.97);
      }

      .tweak-controls-close:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .tweak-control {
        display: grid;
        grid-template-columns: 4.9rem 1fr 2.8rem;
        align-items: center;
        gap: 0.55rem;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .tweak-control input[type="range"] {
        width: 100%;
        margin: 0;
      }

      .tweak-control output {
        text-align: right;
        font-variant-numeric: tabular-nums;
      }

      .tweak-control.tweak-control-toggle {
        grid-template-columns: 4.9rem 1fr 2.8rem;
      }

      .tweak-toggle-field {
        min-width: 0;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.72rem;
        font-weight: 600;
        color: var(--ink);
      }

      .tweak-toggle-field input[type="checkbox"] {
        width: 1rem;
        height: 1rem;
        margin: 0;
        accent-color: #3b82f6;
        cursor: pointer;
      }

      #calendar-scroll {
        --canvas-gap: 1rem;
        overflow-y: auto;
        padding: 1rem;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      #calendar-scroll.is-zoomed {
        overflow: hidden;
      }

      #calendar-canvas {
        position: relative;
        min-width: 100%;
        display: grid;
        gap: var(--canvas-gap);
        align-content: start;
        transform-origin: 0 0;
        transition: transform 0.24s ease-in-out;
      }

      #calendar-scroll::-webkit-scrollbar {
        width: 0;
        height: 0;
        display: none;
      }

      .month-card {
        width: min(920px, 100%);
        margin: 0 auto;
        border: 0;
        border-radius: 14px;
        background: var(--panel);
        padding: 0.75rem;
        box-shadow: var(--card-shadow);
      }

      .month-title {
        margin: 0 0 0.7rem;
        font-size: 1.05rem;
      }

      .month-table-shell {
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid var(--line);
        background: var(--panel);
      }

      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        table-layout: fixed;
        transition: height 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      table.is-unexpanding {
        transition-duration: 0.42s;
      }

      col {
        transition: width 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      table.is-unexpanding col {
        transition-duration: 0.42s;
      }

      th,
      td {
        border-right: 1px solid var(--line);
        border-bottom: 1px solid var(--line);
        height: calc(2.6rem * 1.4);
      }

      th:last-child,
      td:last-child {
        border-right: 0;
      }

      tbody tr:last-child td {
        border-bottom: 0;
      }

      tbody tr {
        transition: height 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      table.is-unexpanding tbody tr {
        transition-duration: 0.42s;
      }

      th {
        background: var(--muted);
        text-align: center;
        font-size: 0.78rem;
        font-weight: 700;
      }

      td {
        background: var(--panel);
        text-align: left;
        vertical-align: top;
        padding: 0.24rem 0.36rem;
        font-size: 0.9rem;
        font-weight: 600;
      }

      td.empty {
        background: var(--muted);
        color: #a6acb8;
        font-weight: 400;
      }

      td.day-cell {
        position: relative;
        overflow: hidden;
        cursor: pointer;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        transition:
          background-color 0.24s ease,
          color 0.24s ease,
          box-shadow 0.24s ease;
      }

      td.day-cell.is-deselecting {
        transition-duration: 1.08s, 1.08s, 1.08s;
      }

      .day-cell-content {
        min-height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.16rem;
        transform-origin: top left;
        transition: transform 0.22s ease-in-out;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day {
        z-index: 4;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day .day-cell-content {
        transform: scale(1.2);
      }

      .day-close-btn {
        position: absolute;
        top: 0.26rem;
        right: 0.26rem;
        width: 1.38rem;
        height: 1.38rem;
        border: 1px solid rgba(51, 65, 85, 0.26);
        border-radius: 0.52rem;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.98) 0%,
          rgba(241, 245, 249, 0.9) 100%
        );
        color: #0f172a;
        display: inline-grid;
        place-items: center;
        padding: 0;
        font-size: 0.72rem;
        font-weight: 800;
        line-height: 1;
        font-family: "Trebuchet MS", "Avenir Next", "Segoe UI", sans-serif;
        opacity: 0;
        pointer-events: none;
        cursor: pointer;
        z-index: 6;
        transform: translateY(-2px) scale(0.9);
        backdrop-filter: blur(3px);
        transition:
          opacity 0.16s ease,
          transform 0.18s ease,
          background-color 0.16s ease,
          border-color 0.16s ease;
      }

      .day-close-btn:hover {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 1) 0%,
          rgba(248, 250, 252, 0.96) 100%
        );
        transform: translateY(-1px) scale(1.02);
      }

      .day-close-btn:active {
        transform: translateY(0) scale(0.98);
      }

      .day-close-btn:focus-visible {
        outline: 2px solid #60a5fa;
        outline-offset: 1px;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day .day-close-btn {
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0) scale(1);
      }

      .day-number {
        line-height: 1;
        font-variant-numeric: tabular-nums;
      }

      .day-state-row {
        display: inline-flex;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        justify-content: center;
        align-items: center;
        gap: 0.32rem;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      td.day-cell.selected-day .day-state-row {
        opacity: 1;
        pointer-events: auto;
      }

      .day-score-row {
        position: absolute;
        left: 50%;
        top: 50%;
        width: min(90%, 15.5rem);
        display: grid;
        grid-template-columns: 1fr;
        gap: 0.34rem;
        padding: 0.44rem 0.52rem 0.42rem;
        border-radius: 14px;
        border: 1px solid color-mix(in srgb, var(--line) 62%, transparent);
        background: color-mix(in srgb, var(--panel) 78%, transparent);
        box-shadow: inset 0 1px 0 color-mix(in srgb, #ffffff 24%, transparent);
        backdrop-filter: blur(2px);
        transform: translate(-50%, -50%);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      .day-note-row {
        position: absolute;
        left: 50%;
        top: 50%;
        width: min(90%, 15.5rem);
        display: grid;
        grid-template-columns: 1fr;
        transform: translate(-50%, -50%);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      .day-note-input {
        width: 100%;
        min-height: 6.2rem;
        max-height: min(15rem, 42vh);
        border-radius: 12px;
        border: 1px solid color-mix(in srgb, var(--line) 62%, transparent);
        background: color-mix(in srgb, var(--panel) 84%, transparent);
        box-shadow: inset 0 1px 0 color-mix(in srgb, #ffffff 22%, transparent);
        color: color-mix(in srgb, var(--ink) 90%, #ffffff 10%);
        font: inherit;
        font-size: 0.76rem;
        line-height: 1.35;
        resize: none;
        padding: 0.5rem 0.56rem;
        outline: none;
        user-select: text;
      }

      .day-note-input::placeholder {
        color: color-mix(in srgb, var(--line) 84%, var(--ink) 16%);
      }

      .day-note-input:focus {
        border-color: color-mix(in srgb, #3b82f6 72%, var(--line) 28%);
        box-shadow:
          0 0 0 2px color-mix(in srgb, #3b82f6 24%, transparent),
          inset 0 1px 0 color-mix(in srgb, #ffffff 22%, transparent);
      }

      .notes-hover-preview {
        position: fixed;
        left: 0;
        top: 0;
        width: fit-content;
        max-width: min(42rem, calc(100vw - 1.4rem));
        max-height: min(42vh, 16rem);
        border-radius: 14px;
        border: 1px solid var(--line);
        background: color-mix(in srgb, var(--panel) 80%, transparent);
        box-shadow: var(--card-shadow);
        padding: 0.74rem 0.88rem;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transform: translateY(-8px) scale(0.985);
        z-index: 35;
        transition:
          opacity 0.2s ease,
          transform 0.2s ease,
          visibility 0s linear 0.2s;
      }

      .notes-hover-preview.is-visible {
        opacity: 1;
        visibility: visible;
        transform: translateY(0) scale(1);
        transition:
          opacity 0.2s ease,
          transform 0.2s ease,
          visibility 0s linear 0s;
      }

      .notes-hover-preview-content {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 12;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: pre-line;
        overflow-wrap: anywhere;
        font-size: 0.84rem;
        line-height: 1.34;
        letter-spacing: 0.005em;
        color: var(--ink);
      }

      .day-score-slider {
        --score-progress: 0%;
        --score-track: var(
          --score-slider-track,
          color-mix(in srgb, var(--line) 52%, var(--panel) 48%)
        );
        --score-track-active: var(
          --score-slider-active,
          color-mix(in srgb, #3b82f6 58%, #22d3ee 42%)
        );
        --score-thumb: var(--score-slider-thumb, #3b82f6);
        --score-thumb-contrast: var(
          --score-slider-thumb-contrast,
          color-mix(in srgb, var(--panel) 92%, #ffffff 8%)
        );
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 0.36rem;
        margin: 0;
        border-radius: 999px;
        border: 0;
        padding: 0;
        background: linear-gradient(
          90deg,
          var(--score-track-active) 0%,
          var(--score-track-active) var(--score-progress),
          var(--score-track) var(--score-progress),
          var(--score-track) 100%
        );
        box-shadow:
          inset 0 1px 2px rgba(15, 23, 42, 0.2),
          inset 0 0 0 1px color-mix(in srgb, var(--line) 54%, transparent);
        cursor: pointer;
        transition:
          filter 0.18s ease,
          box-shadow 0.18s ease;
      }

      .day-score-slider::-webkit-slider-runnable-track {
        height: 0.36rem;
        border-radius: 999px;
        background: transparent;
      }

      .day-score-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 1.04rem;
        height: 1.04rem;
        border-radius: 999px;
        border: 0;
        background: var(--score-track-active);
        box-shadow:
          0 1px 6px rgba(15, 23, 42, 0.32);
        margin-top: calc((0.36rem - 1.04rem) / 2);
        transition:
          transform 0.16s ease,
          background-color 0.16s ease,
          box-shadow 0.16s ease;
      }

      .day-score-slider::-moz-range-track {
        height: 0.36rem;
        border-radius: 999px;
        border: 0;
        background: var(--score-track);
      }

      .day-score-slider::-moz-range-progress {
        height: 0.36rem;
        border-radius: 999px;
        border: 0;
        background: var(--score-track-active);
      }

      .day-score-slider::-moz-range-thumb {
        width: 1.04rem;
        height: 1.04rem;
        border-radius: 999px;
        border: 0;
        background: var(--score-track-active);
        box-shadow:
          0 1px 6px rgba(15, 23, 42, 0.32);
        transition:
          transform 0.16s ease,
          background-color 0.16s ease,
          box-shadow 0.16s ease;
      }

      .day-score-slider:hover {
        filter: brightness(1.06);
        box-shadow:
          inset 0 1px 2px rgba(15, 23, 42, 0.24),
          inset 0 0 0 1px color-mix(in srgb, var(--line) 66%, transparent);
      }

      .day-score-slider:hover::-webkit-slider-thumb {
        background: color-mix(in srgb, var(--score-track-active) 84%, #ffffff 16%);
        box-shadow:
          0 1px 10px rgba(15, 23, 42, 0.38),
          0 0 0 3px color-mix(in srgb, var(--score-track-active) 26%, transparent);
      }

      .day-score-slider:hover::-moz-range-thumb {
        background: color-mix(in srgb, var(--score-track-active) 84%, #ffffff 16%);
        box-shadow:
          0 1px 10px rgba(15, 23, 42, 0.38),
          0 0 0 3px color-mix(in srgb, var(--score-track-active) 26%, transparent);
      }

      .day-score-slider:active {
        filter: brightness(1.12);
      }

      .day-score-slider:active::-webkit-slider-thumb {
        transform: scale(1.22);
        background: color-mix(in srgb, var(--score-track-active) 74%, #ffffff 26%);
        box-shadow:
          0 1px 12px rgba(15, 23, 42, 0.42),
          0 0 0 4px color-mix(in srgb, var(--score-track-active) 36%, transparent);
      }

      .day-score-slider:active::-moz-range-thumb {
        transform: scale(1.22);
        background: color-mix(in srgb, var(--score-track-active) 74%, #ffffff 26%);
        box-shadow:
          0 1px 12px rgba(15, 23, 42, 0.42),
          0 0 0 4px color-mix(in srgb, var(--score-track-active) 36%, transparent);
      }

      .day-score-slider:focus-visible {
        outline: 2px solid #60a5fa;
        outline-offset: 2px;
      }

      .day-score-value {
        min-width: 0;
        text-align: center;
        font-size: 0.66rem;
        font-weight: 700;
        letter-spacing: 0.03em;
        font-variant-numeric: tabular-nums;
        line-height: 1.1;
        color: color-mix(in srgb, var(--ink) 84%, #ffffff 16%);
      }

      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell .day-score-row {
        display: none;
      }

      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell .day-state-row {
        top: calc(50% + 5px);
        transition: opacity 0.18s ease-in-out;
      }

      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell:hover .day-state-row {
        opacity: 1;
        pointer-events: auto;
      }

      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell[data-day-state="red"]:not(.selected-day)::after,
      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell[data-day-state="yellow"]:not(.selected-day)::after,
      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell[data-day-state="green"]:not(.selected-day)::after {
        left: auto;
        top: 0.34rem;
        right: 0.34rem;
        transform: none;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell .day-state-row {
        display: none;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell .day-score-row {
        left: 0.34rem;
        right: 0.34rem;
        bottom: calc(0.34rem + 3px);
        top: auto;
        width: auto;
        transform: none;
        padding: 0;
        border: 0;
        border-radius: 0;
        background: transparent;
        box-shadow: none;
        backdrop-filter: none;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell:hover .day-score-row {
        opacity: 1;
        pointer-events: auto;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell .day-score-value {
        display: none;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell[data-day-score]:not(.selected-day)::after {
        width: 1.8rem;
        height: 1.8rem;
        min-width: 0;
        padding: 0;
        border-radius: 999px;
        border: 1px solid color-mix(in srgb, var(--line) 72%, transparent);
        background: color-mix(in srgb, var(--muted) 84%, var(--panel) 16%);
        box-shadow:
          0 2px 8px color-mix(in srgb, #0f172a 12%, transparent),
          inset 0 1px 0 color-mix(in srgb, #ffffff 50%, transparent);
        display: inline-grid;
        place-items: center;
        text-align: center;
        font-family: "Avenir Next", "Segoe UI", "Trebuchet MS", sans-serif;
        font-size: 0.96rem;
        font-weight: 820;
        letter-spacing: 0.012em;
        font-variant-numeric: tabular-nums;
        text-shadow:
          0 1px 0 color-mix(in srgb, #ffffff 44%, transparent),
          0 2px 10px color-mix(in srgb, #0f172a 18%, transparent);
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      #calendar-scroll[data-calendar-type="score"] td.day-cell[data-day-score]:not(.selected-day):hover::after {
        transform: translate(-50%, calc(-50% - 8px));
      }

      #calendar-scroll[data-calendar-type="score"][data-calendar-display="heatmap"] td.day-cell[data-day-score]:not(.selected-day),
      #calendar-scroll[data-calendar-type="score"][data-calendar-display="number-heatmap"] td.day-cell[data-day-score]:not(.selected-day) {
        background: color-mix(
          in srgb,
          var(--score-slider-active) var(--score-heat-intensity, 0%),
          var(--panel)
        );
      }

      #calendar-scroll[data-calendar-type="score"][data-calendar-display="heatmap"] td.day-cell[data-day-score]:not(.selected-day)::after {
        content: none;
        display: none;
      }

      #calendar-scroll[data-calendar-type="score"][data-calendar-display="heatmap"] td.day-cell[data-day-score]:not(.selected-day):hover::after {
        content: attr(data-day-score);
        display: inline-grid;
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell .day-state-row,
      #calendar-scroll[data-calendar-type="notes"] td.day-cell .day-score-row {
        display: none;
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day .day-note-row {
        left: 0;
        right: 0;
        top: 1.72rem;
        bottom: 0;
        width: auto;
        transform: none;
        opacity: 1;
        pointer-events: auto;
        transition-delay: 0.12s;
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day .day-note-input {
        width: 100%;
        height: 100%;
        min-height: 0;
        max-height: none;
        border: 0;
        border-radius: 0;
        outline: none;
        box-shadow: none;
        background: color-mix(in srgb, var(--bg-bottom) 74%, #000000 26%);
        color: color-mix(in srgb, var(--ink) 92%, #ffffff 8%);
        font-size: calc(0.76rem - 2px);
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day .day-note-input:focus {
        border: 0;
        outline: none;
        box-shadow: none;
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day {
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--muted) 76%, var(--panel) 24%) 0%,
          color-mix(in srgb, var(--muted) 62%, var(--panel) 38%) 56%,
          color-mix(in srgb, var(--bg-bottom) 55%, var(--muted) 45%) 100%
        );
        color: color-mix(in srgb, var(--ink) 92%, #ffffff 8%);
      }

      #calendar-scroll[data-calendar-type="check"] td.day-cell .day-state-row,
      #calendar-scroll[data-calendar-type="check"] td.day-cell .day-score-row,
      #calendar-scroll[data-calendar-type="check"] td.day-cell .day-note-row,
      #calendar-scroll[data-calendar-type="check"] td.day-cell .day-close-btn {
        display: none;
      }

      #calendar-scroll[data-calendar-type="signal-3"] td.day-cell .day-note-row,
      #calendar-scroll[data-calendar-type="score"] td.day-cell .day-note-row {
        display: none;
      }

      td.day-cell::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 50%;
        width: 0.72rem;
        height: 0.72rem;
        border-radius: 999px;
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.78);
        transition:
          opacity 0.2s ease,
          transform 0.2s ease,
          background-color 0.2s ease;
      }

      td.day-cell[data-day-state="red"]:not(.selected-day)::after,
      td.day-cell[data-day-state="yellow"]:not(.selected-day)::after,
      td.day-cell[data-day-state="green"]:not(.selected-day)::after {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      td.day-cell[data-day-state="red"]:not(.selected-day)::after {
        background: hsl(0 88% 62%);
      }

      td.day-cell[data-day-state="yellow"]:not(.selected-day)::after {
        background: hsl(48 88% 58%);
      }

      td.day-cell[data-day-state="green"]:not(.selected-day)::after {
        background: hsl(142 88% 48%);
      }

      td.day-cell[data-day-score]:not(.selected-day)::after {
        content: attr(data-day-score);
        width: auto;
        min-width: 1.05rem;
        height: auto;
        padding: 0;
        border-radius: 0;
        background: transparent;
        color: color-mix(in srgb, var(--ink) 90%, #ffffff 10%);
        font-size: 0.78rem;
        font-weight: 750;
        line-height: 1;
        opacity: 1;
        transform: translate(-50%, -50%);
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell[data-day-note]:not(.selected-day)::after {
        left: auto;
        top: 0.34rem;
        right: 0.34rem;
        width: 0.56rem;
        height: 0.56rem;
        border-radius: 999px;
        opacity: 1;
        transform: none;
        background: #3b82f6;
      }

      #calendar-scroll[data-calendar-type="notes"] td.day-cell[data-day-note]:not(.selected-day):hover::before {
        content: attr(data-day-note-preview);
        position: absolute;
        left: 0.32rem;
        right: 1.02rem;
        top: calc(1.04rem + 3px);
        bottom: 0.32rem;
        display: block;
        white-space: pre-line;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: calc(0.47rem + 2px);
        font-weight: 500;
        line-height: 1.1;
        letter-spacing: 0.01em;
        color: color-mix(in srgb, var(--ink) 66%, transparent);
        opacity: 0.28;
        transform: none;
        pointer-events: none;
      }

      td.day-cell[data-day-checked="true"]::after {
        content: "\2713";
        width: auto;
        min-width: 0;
        height: auto;
        padding: 0;
        border-radius: 0;
        background: transparent;
        color: color-mix(in srgb, #22c55e 62%, var(--ink) 38%);
        font-size: calc(0.88rem * 1.5);
        font-weight: 800;
        line-height: 1;
        opacity: 1;
        transform: translate(-50%, -50%);
      }

      td.day-cell:hover:not(.selected-day):not(.today-cell) {
        background: var(--day-cell-hover-bg, rgba(29, 78, 216, 0.1));
      }

      td.day-cell.today-cell:not(.selected-day) {
        box-shadow: inset 0 0 0 2px #3b82f6;
      }

      .day-state-btn {
        width: 2.02rem;
        height: 2.02rem;
        border-radius: 999px;
        position: relative;
        border: 1px solid rgba(148, 163, 184, 0.54);
        padding: 0;
        display: inline-grid;
        place-items: center;
        background: radial-gradient(
          120% 120% at 28% 24%,
          rgba(255, 255, 255, 0.24) 0%,
          rgba(15, 23, 42, 0.56) 44%,
          rgba(2, 6, 23, 0.92) 100%
        );
        color: transparent;
        font-size: 0.01px;
        font-weight: 600;
        line-height: 1;
        cursor: pointer;
        opacity: 1;
        filter: saturate(0.96);
        transform: translateZ(0);
        transition:
          transform 0.18s ease,
          filter 0.2s ease,
          background 0.2s ease,
          border-color 0.2s ease,
          opacity 0.2s ease;
      }

      .day-state-btn::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        pointer-events: none;
        opacity: 0;
        box-shadow: inset 0 0 0 2px rgba(248, 250, 252, 0.64);
        transition: opacity 0.2s ease;
      }

      .day-state-btn:not(.is-active) {
        opacity: 1;
      }

      .day-state-btn:hover {
        transform: scale(1.04);
      }

      .day-state-btn:active {
        transform: scale(0.98);
      }

      .day-state-btn.is-active {
        opacity: 1;
        filter: saturate(1.1) brightness(1.08);
        transform: scale(1.08);
      }

      .day-state-btn.is-active::after {
        opacity: 1;
      }

      .day-state-btn.day-state-x {
        background: radial-gradient(
          120% 120% at 30% 24%,
          rgba(225, 236, 255, 0.85) 0%,
          rgba(131, 164, 235, 0.62) 40%,
          rgba(52, 79, 140, 0.92) 100%
        );
        border-color: rgba(191, 219, 254, 0.82);
      }

      .day-state-btn.day-state-red {
        background: radial-gradient(
          120% 120% at 30% 24%,
          rgba(255, 154, 171, 0.95) 0%,
          rgba(244, 79, 108, 0.88) 44%,
          rgba(173, 29, 58, 0.98) 100%
        );
        border-color: rgba(255, 169, 183, 0.82);
      }

      .day-state-btn.day-state-yellow {
        background: radial-gradient(
          120% 120% at 30% 24%,
          rgba(254, 240, 138, 0.96) 0%,
          rgba(250, 204, 67, 0.9) 44%,
          rgba(181, 132, 21, 0.98) 100%
        );
        border-color: rgba(254, 240, 138, 0.82);
      }

      .day-state-btn.day-state-green {
        background: radial-gradient(
          120% 120% at 30% 24%,
          rgba(134, 239, 172, 0.96) 0%,
          rgba(34, 197, 94, 0.9) 44%,
          rgba(21, 128, 61, 0.98) 100%
        );
        border-color: rgba(134, 239, 172, 0.82);
      }

      #calendar-scroll[data-calendar-type="signal-3"] .day-state-btn {
        width: calc(2.02rem * 0.6);
        height: calc(2.02rem * 0.6);
      }

      td.day-cell.selected-day {
        background: var(
          --selected-day-light-gradient,
          linear-gradient(
            180deg,
            color-mix(in srgb, #93c5fd 94%, #1e3a8a 6%) 0%,
            #93c5fd 40%,
            color-mix(in srgb, #93c5fd 84%, #ffffff 16%) 100%
          )
        );
        color: #0b2840;
      }

      #return-to-current,
      #theme-toggle,
      #mobile-debug-toggle {
        width: 2.1rem;
        height: 2.1rem;
        display: inline-grid;
        place-items: center;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0;
        font-size: 1.05rem;
        font-weight: 600;
        line-height: 1;
        color: var(--line);
        background: var(--panel);
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        transition: transform 0.15s ease;
      }

      #mobile-debug-toggle {
        position: fixed;
        left: 1rem;
        bottom: 1rem;
        width: auto;
        min-width: 4.4rem;
        padding: 0 0.72rem;
        font-size: 0.64rem;
        letter-spacing: 0.01em;
        color: var(--ink);
        z-index: 21;
        display: none;
      }

      #github-link {
        position: fixed;
        right: 1rem;
        bottom: 1rem;
        width: 2.25rem;
        height: 2.25rem;
        display: inline-grid;
        place-items: center;
        border: 1px solid var(--line);
        border-radius: 999px;
        color: var(--ink);
        background: var(--panel);
        box-shadow: 0 6px 16px rgba(15, 23, 42, 0.18);
        text-decoration: none;
        z-index: 20;
        transition:
          transform 0.15s ease,
          box-shadow 0.15s ease;
      }

      #return-to-current {
        position: fixed;
        right: max(0.25rem, calc((100vw - 920px) / 2 - 2.6rem));
        top: calc(env(safe-area-inset-top, 0px) + 5rem);
        z-index: 21;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transform: translateY(6px);
        transition:
          opacity 0.22s ease,
          transform 0.22s ease,
          visibility 0s linear 0.22s;
      }

      #return-to-current.is-visible {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        transform: translateY(0);
        transition:
          opacity 0.22s ease,
          transform 0.22s ease,
          visibility 0s;
      }

      #theme-toggle {
        margin-left: 0;
        position: relative;
        z-index: 2;
      }

      #calendar-options {
        position: absolute;
        right: 0;
        top: calc(100% + 0.42rem);
        transform: translateY(-0.28rem);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0;
        width: min(14.2rem, 74vw);
        padding: 0.42rem 0;
        border: 1px solid var(--line);
        border-radius: 12px;
        background: var(--panel);
        box-shadow: 0 8px 20px rgba(15, 23, 42, 0.22);
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 48;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      #calendar-switcher.is-expanded #calendar-options {
        max-height: calc(100dvh - 7rem);
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
        overflow-y: auto;
      }

      #calendar-switcher.is-expanded.is-adding #calendar-options {
        max-height: calc(100dvh - 5.5rem);
      }

      #calendar-switcher.is-expanded.is-adding.has-score-display #calendar-options {
        max-height: calc(100dvh - 3.2rem);
      }

      #calendar-switcher.is-expanded.is-editing-calendar #calendar-options {
        max-height: calc(100dvh - 5.5rem);
      }

      #calendar-switcher.is-expanded.is-editing-calendar.has-score-display #calendar-options {
        max-height: calc(100dvh - 3.2rem);
      }

      .calendar-options-title {
        margin: 0;
        padding: 0.08rem 0.88rem 0.34rem;
        font-size: 0.72rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        text-align: center;
        color: var(--ink);
        opacity: 0.92;
      }

      .calendar-options-divider {
        height: 1px;
        margin: 0.08rem 0;
        background: color-mix(in srgb, var(--line) 88%, transparent);
      }

      #calendar-list {
        display: grid;
      }

      .calendar-option {
        min-height: 2.2rem;
        border: 0;
        border-radius: 8px;
        padding: 0.4rem 0.82rem;
        font-size: 0.72rem;
        font-weight: 650;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: transparent;
        white-space: nowrap;
        box-shadow: none;
        cursor: pointer;
        width: 100%;
        text-align: left;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.62rem;
        transition:
          background-color 0.16s ease,
          color 0.16s ease,
          opacity 0.16s ease;
      }

      .calendar-option[data-calendar-type] {
        border-radius: 0;
      }

      .calendar-option:hover {
        background: color-mix(in srgb, var(--muted) 72%, transparent);
      }

      .calendar-option:active {
        background: color-mix(in srgb, var(--muted) 82%, transparent);
      }

      .calendar-option:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: -2px;
      }

      .calendar-option.is-active {
        background: color-mix(in srgb, var(--muted) 56%, transparent);
      }

      .calendar-option-left {
        min-width: 0;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        flex: 1;
      }

      .calendar-option-name-wrap {
        min-width: 0;
        display: inline-flex;
        align-items: center;
        gap: 0.28rem;
        flex: 1;
      }

      .calendar-option-dot {
        width: 0.68rem;
        height: 0.68rem;
        border-radius: 999px;
        flex: 0 0 0.68rem;
        background: var(--calendar-dot-color, #3b82f6);
      }

      .calendar-option-label {
        min-width: 0;
        flex: 0 1 auto;
        max-width: 100%;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .calendar-option.is-active .calendar-option-label {
        font-weight: 700;
      }

      .calendar-option-type-icon {
        --calendar-type-icon-color: #3b82f6;
        display: inline-grid;
        place-items: center;
        width: calc(0.96rem + 6px);
        height: calc(0.96rem + 6px);
        flex: 0 0 calc(0.96rem + 6px);
        border-radius: 999px;
        background: color-mix(
          in srgb,
          var(--muted) 74%,
          var(--calendar-type-icon-color) 26%
        );
        border: 1px solid
          color-mix(in srgb, var(--line) 58%, var(--calendar-type-icon-color) 42%);
        color: color-mix(in srgb, var(--calendar-type-icon-color) 78%, #ffffff 22%);
      }

      .calendar-option-type-icon.is-signal {
        color: color-mix(in srgb, var(--calendar-type-icon-color) 82%, #ffffff 18%);
      }

      .calendar-option-type-icon.is-signal::before {
        content: "";
        width: calc(0.16rem + 1px);
        height: calc(0.16rem + 1px);
        border-radius: 999px;
        background: currentColor;
        box-shadow:
          -0.18rem -0.18rem 0 currentColor,
          0.18rem 0.18rem 0 currentColor;
      }

      .calendar-option-type-icon.is-score {
        color: color-mix(in srgb, var(--calendar-type-icon-color) 84%, #ffffff 16%);
      }

      .calendar-option-type-icon.is-score::before {
        content: "\2605";
        font-size: calc(0.58rem + 1px);
        line-height: 1;
        font-weight: 700;
      }

      .calendar-option-type-icon.is-check {
        color: color-mix(in srgb, var(--calendar-type-icon-color) 84%, #ffffff 16%);
        font-size: calc(0.7rem + 1px);
        font-weight: 850;
        line-height: 1;
      }

      .calendar-option-type-icon.is-check::before {
        content: "\2713";
        transform: translateX(-1px);
      }

      .calendar-option-type-icon.is-notes {
        color: color-mix(in srgb, var(--calendar-type-icon-color) 84%, #ffffff 16%);
        font-size: calc(0.63rem + 1px);
        font-weight: 850;
        line-height: 1;
      }

      .calendar-option-type-icon.is-notes::before {
        content: "\270E";
      }

      .calendar-option-pin {
        width: 0.96rem;
        height: 0.96rem;
        border-radius: 999px;
        flex: 0 0 0.96rem;
        display: inline-grid;
        place-items: center;
        color: color-mix(in srgb, var(--ink) 78%, transparent);
        --pin-icon-dark: color-mix(in srgb, var(--ink) 28%, #000000 72%);
        opacity: 0;
        pointer-events: none;
        transition:
          opacity 0.16s ease,
          color 0.16s ease,
          background-color 0.16s ease,
          box-shadow 0.16s ease;
      }

      .calendar-option-pin-icon {
        width: 0.74rem;
        height: 0.74rem;
        display: block;
        background-color: var(--pin-icon-dark);
        -webkit-mask: url("/pin-icon.svg") center / contain no-repeat;
        mask: url("/pin-icon.svg") center / contain no-repeat;
        transform: scale(1.5);
        transform-origin: center;
      }

      .calendar-option-main.is-pinned .calendar-option-pin-icon {
        background-color: currentColor;
      }

      .calendar-option-main:hover .calendar-option-pin,
      .calendar-option-main.is-pinned .calendar-option-pin {
        opacity: 0.86;
        pointer-events: auto;
      }

      .calendar-option-pin:hover {
        opacity: 1;
        color: color-mix(in srgb, var(--ink) 92%, #ffffff 8%);
        background: color-mix(in srgb, var(--muted) 88%, #ffffff 12%);
        box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--line) 72%, transparent);
      }

      .calendar-option-pin:active {
        opacity: 1;
        background: color-mix(in srgb, var(--muted) 92%, transparent);
        box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--line) 84%, transparent);
      }

      .calendar-option-action {
        justify-content: flex-start;
        gap: 0.52rem;
      }

      .calendar-option-icon {
        width: 0.92rem;
        text-align: center;
        font-size: 1rem;
        line-height: 1;
        color: color-mix(in srgb, var(--ink) 85%, #ffffff 15%);
      }

      .calendar-add-shell {
        display: grid;
        gap: 0.2rem;
      }

      .calendar-add-shell.is-editing {
        gap: calc(0.18rem + 6px);
      }

      .calendar-edit-shell {
        display: grid;
        gap: 0.2rem;
      }

      .calendar-edit-shell.is-editing {
        gap: calc(0.18rem + 6px);
      }

      #calendar-switcher.is-adding .calendar-edit-divider,
      #calendar-switcher.is-adding #calendar-edit-trigger {
        display: none;
      }

      #calendar-switcher.is-editing-calendar .calendar-edit-divider,
      #calendar-switcher.is-editing-calendar .calendar-add-shell {
        display: none;
      }

      .calendar-add-trigger {
        max-height: 2.2rem;
        overflow: hidden;
        transition:
          max-height 0.22s ease,
          opacity 0.18s ease,
          padding 0.18s ease,
          border-width 0.18s ease,
          box-shadow 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-edit-trigger {
        max-height: 2.2rem;
        overflow: hidden;
        transition:
          max-height 0.22s ease,
          opacity 0.18s ease,
          padding 0.18s ease,
          border-width 0.18s ease,
          box-shadow 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-add-editor {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        transform: translateY(-0.2rem);
        padding: 0 0.82rem;
        display: grid;
        gap: 0.38rem;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-edit-editor {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        transform: translateY(-0.2rem);
        padding: 0 0.82rem;
        display: grid;
        gap: 0.38rem;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-edit-form,
      .calendar-delete-confirm {
        display: grid;
        gap: 0.38rem;
      }

      .calendar-delete-confirm {
        display: none;
      }

      .calendar-edit-editor.is-delete-confirming .calendar-edit-form {
        display: none;
      }

      .calendar-edit-editor.is-delete-confirming .calendar-delete-confirm {
        display: grid;
      }

      .calendar-add-panel {
        display: grid;
        gap: 0.38rem;
        padding: 0.52rem;
        border-radius: 10px;
        border: 0;
        background: rgb(0 0 0 / 20%);
      }

      :root:not(.dark):not(.solarized-light) .calendar-add-panel {
        background: #eef2f8;
      }

      .calendar-add-panel .calendar-add-title,
      .calendar-add-panel .calendar-add-field-label {
        color: color-mix(in srgb, #ffffff 88%, var(--ink) 12%);
      }

      :root:not(.dark) .calendar-add-panel .calendar-add-title,
      :root:not(.dark) .calendar-add-panel .calendar-add-field-label {
        color: color-mix(in srgb, var(--ink) 92%, #000000 8%);
      }

      .calendar-add-shell.is-editing .calendar-add-trigger {
        max-height: 0;
        min-height: 0;
        opacity: 0;
        pointer-events: none;
        padding-top: 0;
        padding-bottom: 0;
        border-width: 0;
        box-shadow: none;
        transform: scale(0.98);
      }

      .calendar-edit-shell.is-editing .calendar-edit-trigger {
        max-height: 0;
        min-height: 0;
        opacity: 0;
        pointer-events: none;
        padding-top: 0;
        padding-bottom: 0;
        border-width: 0;
        box-shadow: none;
        transform: scale(0.98);
      }

      .calendar-add-shell.is-editing .calendar-add-editor {
        max-height: calc(22rem + 6px);
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
        padding-top: 3px;
        padding-bottom: 3px;
      }

      .calendar-add-shell.is-editing.has-score-display .calendar-add-editor {
        max-height: calc(24.6rem + 6px);
      }

      .calendar-edit-shell.is-editing .calendar-edit-editor {
        max-height: calc(23rem + 6px);
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
        padding-top: 3px;
        padding-bottom: 3px;
      }

      .calendar-edit-shell.is-editing.has-score-display .calendar-edit-editor {
        max-height: calc(25.6rem + 6px);
      }

      .calendar-add-title {
        margin: 0 0 0.2rem;
        font-size: 0.66rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: none;
        text-align: center;
        color: var(--ink);
        opacity: 0.82;
      }

      .calendar-add-field {
        display: grid;
        gap: 0.32rem;
      }

      .calendar-add-field[hidden] {
        display: none;
      }

      .calendar-add-field + .calendar-add-field {
        margin-top: calc(0.22rem + 4px);
      }

      .calendar-add-field + .calendar-add-actions {
        margin-top: 4px;
      }

      .calendar-add-field-label {
        font-size: 0.56rem;
        font-weight: 700;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: var(--ink);
        opacity: 0.78;
      }

      .calendar-add-input,
      .calendar-add-select {
        height: 1.95rem;
        border: 1px solid var(--line);
        border-radius: 14px;
        padding: 0 0.56rem;
        font-size: 0.66rem;
        font-weight: 600;
        color: var(--ink);
        background: var(--panel);
      }

      .calendar-add-input::placeholder {
        color: var(--line);
      }

      .calendar-add-input.is-error-flash {
        animation: calendar-add-input-error-flash 0.24s ease-in-out;
      }

      @keyframes calendar-add-input-error-flash {
        0% {
          background-color: var(--panel);
        }
        45% {
          background-color: color-mix(in srgb, var(--panel) 55%, #ef4444 45%);
        }
        100% {
          background-color: var(--panel);
        }
      }

      .calendar-add-select {
        cursor: pointer;
      }

      .calendar-add-type-display {
        display: inline-flex;
        align-items: center;
        gap: 0.34rem;
      }

      .calendar-add-type-icon {
        width: 2.0em;
        height: 2.0em;
        flex: 0 0 2.0em;
        display: block;
      }

      .calendar-add-color-options {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
        gap: calc(0.38rem - 6px);
      }

      .calendar-color-option {
        width: calc(1.56rem * 1.2);
        height: calc(1.56rem * 1.2);
        min-height: calc(1.56rem * 1.2);
        border: 0;
        border-radius: 999px;
        padding: 0;
        background: transparent;
        display: inline-grid;
        place-items: center;
        cursor: pointer;
        transition: transform 0.16s ease;
      }

      .calendar-color-option:hover {
        transform: scale(1.08);
      }

      .calendar-color-option:focus-visible {
        outline: none;
      }

      .calendar-color-option.is-active {
        transform: scale(1.06);
      }

      .calendar-color-dot {
        width: calc(1.06rem * 1.2);
        height: calc(1.06rem * 1.2);
        border-radius: 999px;
        flex: 0 0 calc(1.06rem * 1.2);
        display: inline-grid;
        place-items: center;
        background: var(--color-dot, #22c55e);
      }

      .calendar-color-option.is-active .calendar-color-dot {
        box-shadow: 0 0 0 2px #ffffff;
      }

      .calendar-add-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.34rem;
      }

      .calendar-action-btn {
        height: 1.95rem;
        justify-content: center;
        border: 1px solid var(--calendar-action-border);
        border-radius: 20px;
        color: var(--calendar-action-ink);
        background: var(--calendar-action-bg);
      }

      .calendar-action-btn:hover {
        background: var(--calendar-action-bg-hover);
        border-color: var(--calendar-action-border);
      }

      .calendar-action-btn:active {
        background: var(--calendar-action-bg-active);
        border-color: var(--calendar-action-border);
      }

      .calendar-edit-actions {
        grid-template-columns: 1fr 1fr auto;
      }

      .calendar-edit-actions .calendar-option {
        width: 100%;
      }

      .calendar-edit-actions .calendar-action-btn {
        min-height: 1.74rem;
        height: 1.74rem;
        padding: 0 0.68rem;
        font-size: 0.62rem;
      }

      .calendar-edit-delete-btn {
        width: 1.3rem;
        min-width: 1.3rem;
        padding: 0;
        display: inline-grid;
        place-items: center;
        background: color-mix(in srgb, var(--calendar-action-bg) 84%, #ef4444 16%);
        border-color: color-mix(in srgb, var(--calendar-action-border) 72%, #ef4444 28%);
        color: #ffffff;
      }

      .calendar-edit-delete-btn:hover {
        background: color-mix(in srgb, var(--calendar-action-bg-hover) 74%, #ef4444 26%);
        border-color: color-mix(in srgb, var(--calendar-action-border) 60%, #ef4444 40%);
      }

      .calendar-edit-delete-btn:active {
        background: color-mix(in srgb, var(--calendar-action-bg-active) 66%, #ef4444 34%);
        border-color: color-mix(in srgb, var(--calendar-action-border) 52%, #ef4444 48%);
      }

      .calendar-edit-delete-icon {
        width: 0.84rem;
        height: 0.84rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.9;
        stroke-linecap: round;
        stroke-linejoin: round;
        pointer-events: none;
      }

      .calendar-edit-delete-btn:disabled {
        opacity: 0.46;
        cursor: not-allowed;
        transform: none;
      }

      .calendar-delete-panel {
        gap: 0.52rem;
      }

      .calendar-delete-message {
        margin: 0.04rem 0 0.08rem;
        font-size: 0.68rem;
        font-weight: 700;
        line-height: 1.4;
        text-align: center;
        color: color-mix(in srgb, var(--ink) 92%, #ffffff 8%);
      }

      .calendar-delete-name {
        font-weight: 800;
      }

      .calendar-delete-actions {
        grid-template-columns: 1fr 1fr;
      }

      .calendar-delete-remove-btn {
        background: color-mix(in srgb, var(--calendar-action-bg) 68%, #ef4444 32%);
        border-color: color-mix(
          in srgb,
          var(--calendar-action-border) 58%,
          #ef4444 42%
        );
        color: #ffffff;
      }

      .calendar-delete-remove-btn:hover {
        background: color-mix(in srgb, var(--calendar-action-bg-hover) 58%, #ef4444 42%);
        border-color: color-mix(
          in srgb,
          var(--calendar-action-border) 48%,
          #ef4444 52%
        );
      }

      .calendar-delete-remove-btn:active {
        background: color-mix(in srgb, var(--calendar-action-bg-active) 50%, #ef4444 50%);
        border-color: color-mix(
          in srgb,
          var(--calendar-action-border) 42%,
          #ef4444 58%
        );
      }

      #calendar-switcher.is-expanded #header-calendars-btn {
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--muted) 92%, var(--active-calendar-color) 8%) 0%,
          color-mix(in srgb, var(--muted) 96%, #ffffff 4%) 100%
        );
      }

      #calendar-switcher.is-expanded #header-calendars-btn::after {
        opacity: 0.88;
        transform: translateY(calc(0.02rem - 2px)) rotate(-135deg);
      }

      #theme-options {
        position: absolute;
        right: 0;
        top: auto;
        bottom: calc(100% + 0.42rem);
        transform: translateY(0.28rem);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.34rem;
        width: min(11.25rem, 68vw);
        padding: 0.28rem;
        border: 1px solid var(--line);
        border-radius: 20px;
        background: var(--panel);
        box-shadow: 0 8px 20px rgba(15, 23, 42, 0.22);
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 48;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      #theme-switcher.is-expanded #theme-options {
        max-height: 13rem;
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      .theme-options-title {
        margin: 0 0 0.08rem;
        padding: 0;
        font-size: 0.62rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--ink);
        opacity: 0.8;
        text-align: center;
      }

      .theme-option {
        height: 2.1rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0 0.48rem;
        font-size: 0.64rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: var(--panel);
        white-space: nowrap;
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        width: 100%;
        text-align: center;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          transform 0.16s ease,
          color 0.16s ease,
          opacity 0.16s ease;
      }

      .theme-option:hover {
        transform: translateY(-1px);
      }

      .theme-option:active {
        transform: translateY(0);
      }

      .theme-option:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .theme-option.is-active {
        background: var(--muted);
        border-color: #3b82f6;
      }

      .theme-option:disabled,
      .theme-option.is-future {
        opacity: 0.58;
        cursor: default;
      }

      #theme-switcher.is-expanded #theme-toggle {
        background: var(--muted);
      }

      #header-calendars-btn:hover {
        transform: translateY(-1px);
        border-color: color-mix(
          in srgb,
          var(--line) 54%,
          var(--active-calendar-color) 46%
        );
        box-shadow:
          0 4px 10px color-mix(in srgb, #0f172a 78%, transparent),
          0 0 0 1px color-mix(in srgb, var(--active-calendar-color) 32%, transparent),
          0 0 18px color-mix(in srgb, var(--active-calendar-color) 30%, transparent);
      }

      #header-calendars-btn:active {
        transform: translateY(0);
      }

      #header-calendars-btn:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .tooltip-target {
        position: relative;
      }

      .tooltip-target::after {
        position: absolute;
        left: 50%;
        opacity: 0;
        pointer-events: none;
        z-index: 60;
        transition:
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      .tooltip-target::after {
        content: attr(data-tooltip);
        bottom: calc(100% + 0.56rem);
        transform: translate(-50%, 4px);
        padding: 0.34rem 0.48rem;
        border-radius: 9px;
        border: 0;
        background: rgba(71, 85, 105, 0.3);
        color: rgba(248, 250, 252, 0.4);
        white-space: nowrap;
        font-size: 0.69rem;
        line-height: 1;
        font-weight: 600;
        box-shadow: 0 8px 18px rgba(2, 6, 23, 0.35);
        z-index: 61;
      }

      :root:not(.dark) .tooltip-target::after {
        color: rgba(15, 23, 42, 0.72);
      }

      .tooltip-target:hover::after,
      .tooltip-target:focus-visible::after {
        opacity: 1;
        transform: translate(-50%, 0);
      }

      .tooltip-target.tooltip-left::after {
        left: auto;
        bottom: auto;
        top: 50%;
      }

      .tooltip-target.tooltip-left::after {
        right: calc(100% + 0.56rem);
        transform: translate(-4px, -50%);
      }

      .tooltip-target.tooltip-left:hover::after,
      .tooltip-target.tooltip-left:focus-visible::after {
        transform: translate(0, -50%);
      }

      .tooltip-target.tooltip-bottom::after {
        left: 50%;
        right: auto;
        top: calc(100% + 0.56rem + 5px);
        bottom: auto;
        transform: translate(-50%, -4px);
      }

      .tooltip-target.tooltip-bottom:hover::after,
      .tooltip-target.tooltip-bottom:focus-visible::after {
        transform: translate(-50%, 0);
      }

      #calendar-switcher.is-expanded .tooltip-target.tooltip-bottom::after {
        opacity: 0;
        transform: translate(-50%, -4px);
      }

      #return-to-current svg,
      #theme-toggle svg {
        pointer-events: none;
      }

      .theme-icon {
        width: 1rem;
        height: 1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.3;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .close-icon {
        width: 1rem;
        height: 1rem;
        display: none;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.05;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      #theme-switcher.is-expanded .theme-icon {
        display: none;
      }

      #theme-switcher.is-expanded .close-icon {
        display: block;
      }

      .up-icon {
        width: 1rem;
        height: 1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.9;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: transform 0.22s ease;
      }

      #return-to-current.is-down .up-icon {
        transform: rotate(180deg);
      }

      #return-to-current:hover,
      #theme-toggle:hover,
      #mobile-debug-toggle:hover {
        transform: translateY(-1px);
      }

      #github-link:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 22px rgba(15, 23, 42, 0.24);
      }

      #return-to-current:active,
      #theme-toggle:active,
      #mobile-debug-toggle:active {
        transform: translateY(0);
      }

      #github-link:active {
        transform: translateY(0);
      }

      #return-to-current:focus-visible,
      #theme-toggle:focus-visible,
      #mobile-debug-toggle:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      #github-link:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .github-icon {
        width: 1.1rem;
        height: 1.1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.8;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      :root.dark td.empty {
        color: #96a4ba;
      }

      :root.dark td.day-cell.today-cell:not(.selected-day) {
        box-shadow: inset 0 0 0 2px #60a5fa;
      }

      :root.dark .day-state-btn {
        filter: saturate(1.02);
      }

      :root.dark .day-state-btn.is-active {
        filter: saturate(1.14) brightness(1.1);
      }

      :root.dark .day-score-value {
        color: #dbeafe;
      }

      :root.dark td.day-cell[data-day-score]:not(.selected-day)::after {
        color: #c7d2fe;
      }

      :root.dark #calendar-scroll[data-calendar-type="score"] td.day-cell[data-day-score]:not(.selected-day)::after {
        border-color: color-mix(in srgb, #64748b 58%, transparent);
        background: color-mix(in srgb, var(--muted) 62%, #0b1224 38%);
        box-shadow:
          0 2px 10px rgba(2, 6, 23, 0.45),
          inset 0 1px 0 color-mix(in srgb, #ffffff 14%, transparent);
        color: color-mix(in srgb, #dbeafe 90%, #ffffff 10%);
        text-shadow:
          0 1px 0 rgba(15, 23, 42, 0.68),
          0 2px 10px rgba(2, 6, 23, 0.5);
      }

      :root.dark .day-note-input {
        border-color: color-mix(in srgb, #475569 56%, transparent);
        background: color-mix(in srgb, #0f172a 84%, transparent);
        color: #dbeafe;
      }

      :root.dark .day-note-input::placeholder {
        color: color-mix(in srgb, #94a3b8 86%, #dbeafe 14%);
      }

      :root.dark .day-note-input:focus {
        border-color: color-mix(in srgb, #60a5fa 72%, #334155 28%);
        box-shadow:
          0 0 0 2px color-mix(in srgb, #60a5fa 24%, transparent),
          inset 0 1px 0 color-mix(in srgb, #ffffff 16%, transparent);
      }

      :root.dark td.day-cell[data-day-checked="true"]::after {
        color: color-mix(in srgb, #86efac 76%, #f8fafc 24%);
      }

      :root.dark #calendar-scroll[data-calendar-type="notes"] td.day-cell[data-day-note]:not(.selected-day)::after {
        background: #60a5fa;
      }

      :root.dark #calendar-scroll[data-calendar-type="notes"] td.day-cell[data-day-note]:not(.selected-day):hover::before {
        color: color-mix(in srgb, #dbeafe 74%, transparent);
        opacity: 0.24;
      }

      :root.dark #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day {
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--muted) 72%, var(--panel) 28%) 0%,
          color-mix(in srgb, var(--muted) 56%, var(--panel) 44%) 58%,
          color-mix(in srgb, var(--bg-bottom) 68%, var(--muted) 32%) 100%
        );
        color: color-mix(in srgb, var(--ink) 95%, #ffffff 5%);
      }

      :root.dark td.day-cell.selected-day {
        background: var(
          --selected-day-dark-gradient,
          linear-gradient(
            180deg,
            color-mix(in srgb, #2563eb 95%, #60a5fa 5%) 0%,
            #2563eb 62%,
            color-mix(in srgb, #2563eb 93%, #60a5fa 7%) 100%
          )
        );
        color: #dbeafe;
      }

      :root.dark .day-close-btn {
        border-color: rgba(148, 163, 184, 0.34);
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.92) 0%,
          rgba(30, 41, 59, 0.84) 100%
        );
        color: #f1f5f9;
      }

      :root.dark .day-close-btn:hover {
        background: linear-gradient(
          180deg,
          rgba(30, 41, 59, 0.96) 0%,
          rgba(51, 65, 85, 0.88) 100%
        );
      }

      :root.dark #github-link {
        box-shadow: 0 8px 20px rgba(2, 6, 23, 0.6);
      }

      @media (max-width: 640px) {
        #calendar-scroll {
          --canvas-gap: 0.75rem;
          padding: 0.65rem;
        }

        #tweak-controls {
          width: calc(100% - 1.3rem);
          padding: 0.55rem 2.65rem 0.55rem 0.6rem;
          bottom: calc(env(safe-area-inset-bottom, 0px) + 0.5rem);
        }

        .tweak-controls-close {
          display: inline-grid;
          place-items: center;
        }

        .tweak-control {
          grid-template-columns: 4.2rem 1fr 2.45rem;
          gap: 0.5rem;
          font-size: 0.75rem;
        }

        .tweak-control.tweak-control-toggle {
          grid-template-columns: 4.2rem 1fr 2.45rem;
        }

        .tweak-toggle-field {
          gap: 0.38rem;
          font-size: 0.64rem;
        }

        .tweak-toggle-field input[type="checkbox"] {
          width: 0.92rem;
          height: 0.92rem;
        }

        .brand-logo {
          height: 1.8rem;
          max-width: 70vw;
        }

        #header-calendars-btn {
          height: 2.02rem;
          padding: 0 0.72rem;
          font-size: 0.69rem;
        }

        #calendar-switcher {
          gap: 0.3rem;
        }

        .header-pinned-calendar {
          height: 1.72rem;
          padding: 0 0.46rem;
          gap: 0.3rem;
          font-size: 0.62rem;
        }

        .header-pinned-calendar .calendar-current-name {
          max-width: 5.5rem;
        }

        .month-card {
          border-radius: 10px;
          padding: 0.55rem;
        }

        .month-table-shell {
          border-radius: 10px;
        }

        th,
        td {
          height: calc(2.2rem * 1.4);
          font-size: 0.82rem;
        }

        td {
          padding: 0.2rem 0.3rem;
        }

        .day-cell-content {
          gap: 0.14rem;
        }

        .day-state-btn {
          width: 0.9rem;
          height: 0.9rem;
          font-size: 0.48rem;
        }

        #calendar-scroll[data-calendar-type="signal-3"] .day-state-btn {
          width: calc(0.9rem * 0.6);
          height: calc(0.9rem * 0.6);
        }

        .day-state-row {
          gap: 0.2rem;
        }

        .day-score-row {
          width: min(92%, 11.6rem);
          gap: 0.24rem;
          padding: 0.32rem 0.38rem;
        }

        .day-note-row {
          width: min(92%, 11.6rem);
        }

        #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day .day-note-row {
          top: 1.5rem;
        }

        .day-note-input {
          min-height: 4.9rem;
          font-size: 0.62rem;
          padding: 0.36rem 0.42rem;
          border-radius: 10px;
        }

        #calendar-scroll[data-calendar-type="notes"] td.day-cell.selected-day .day-note-input {
          font-size: calc(0.62rem - 2px);
          border-radius: 0;
        }

        .notes-hover-preview {
          width: fit-content;
          max-width: calc(100vw - 1rem);
          max-height: min(48vh, 14rem);
          border-radius: 11px;
          padding: 0.58rem 0.64rem;
        }

        .notes-hover-preview-content {
          -webkit-line-clamp: 10;
          font-size: 0.74rem;
          line-height: 1.3;
        }

        .day-score-value {
          min-width: 0;
          font-size: 0.54rem;
        }

        .day-close-btn {
          width: 1.2rem;
          height: 1.2rem;
          font-size: 0.64rem;
          border-radius: 0.46rem;
        }

        #return-to-current,
        #theme-toggle {
          width: 2rem;
          height: 2rem;
          font-size: 0.98rem;
        }

        #mobile-debug-toggle {
          display: inline-grid;
          left: 0.75rem;
          bottom: 0.75rem;
          min-width: 3.75rem;
          height: 2.05rem;
          padding: 0 0.56rem;
          font-size: 0.58rem;
        }

        #theme-switcher {
          right: 0.75rem;
          bottom: 3.2rem;
          min-width: 2rem;
        }

        #calendar-switcher {
          min-width: 2rem;
        }

        #calendar-switcher.is-expanded #calendar-options {
          width: min(12.5rem, 72vw);
          max-height: calc(100dvh - 6.4rem);
        }

        #calendar-switcher.is-expanded.is-adding #calendar-options {
          max-height: calc(100dvh - 5.2rem);
        }

        #calendar-switcher.is-expanded.is-adding.has-score-display #calendar-options {
          max-height: calc(100dvh - 2.2rem);
        }

        #calendar-switcher.is-expanded.is-editing-calendar #calendar-options {
          max-height: calc(100dvh - 5.2rem);
        }

        #calendar-switcher.is-expanded.is-editing-calendar.has-score-display #calendar-options {
          max-height: calc(100dvh - 2.2rem);
        }

        #theme-switcher.is-expanded #theme-options {
          width: min(10.25rem, 62vw);
          max-height: 12rem;
        }

        .theme-option {
          height: 2rem;
          font-size: 0.58rem;
          padding: 0 0.36rem;
        }

        .calendar-option {
          min-height: 2rem;
          font-size: 0.68rem;
          padding: 0.34rem 0.62rem;
        }

        .calendar-options-title {
          padding: 0.06rem 0.66rem 0.26rem;
          font-size: 0.66rem;
        }

        .calendar-add-input,
        .calendar-add-select,
        .calendar-action-btn {
          height: 1.85rem;
        }

        .calendar-edit-actions .calendar-action-btn {
          height: 1.68rem;
          min-height: 1.68rem;
          font-size: 0.58rem;
        }

        .calendar-edit-delete-btn {
          width: 1.46rem;
          min-width: 1.46rem;
        }

        .tooltip-target::after {
          font-size: 0.66rem;
        }

        #github-link {
          right: 0.75rem;
          bottom: 0.75rem;
          width: 2.05rem;
          height: 2.05rem;
        }

        #return-to-current {
          right: 0.75rem;
          top: calc(env(safe-area-inset-top, 0px) + 4.4rem);
        }

        .github-icon {
          width: 1rem;
          height: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <header>
        <img class="brand-logo" src="/logo-top.png" alt="Just Calendar" />
        <div id="calendar-switcher">
          <div id="header-pinned-calendars"></div>
          <div id="calendar-options" aria-label="Calendar options">
            <p class="calendar-options-title">Calendars</p>
            <div class="calendar-options-divider" aria-hidden="true"></div>
            <div id="calendar-list"></div>
            <div class="calendar-options-divider" aria-hidden="true"></div>
            <div id="calendar-add-shell" class="calendar-add-shell">
              <button
                id="calendar-add-trigger"
                type="button"
                class="calendar-option calendar-option-action calendar-add-trigger"
                data-calendar-action="add"
                aria-label="Add Calendar"
              >
                <span class="calendar-option-icon" aria-hidden="true">+</span>
                <span class="calendar-option-label">Add Calendar</span>
              </button>
              <div
                id="calendar-add-editor"
                class="calendar-add-editor"
                aria-label="New Calendar"
              >
                <div class="calendar-add-panel">
                  <p class="calendar-add-title">New Calendar</p>
                  <label class="calendar-add-field" for="new-calendar-name">
                    <span class="calendar-add-field-label">Name</span>
                    <input
                      id="new-calendar-name"
                      class="calendar-add-input"
                      type="text"
                      placeholder="Calendar name"
                      autocomplete="off"
                    />
                  </label>
                  <label class="calendar-add-field" for="new-calendar-type">
                    <span class="calendar-add-field-label">Type</span>
                    <select id="new-calendar-type" class="calendar-add-select">
                      <option value="signal-3">Semaphore</option>
                      <option value="score">Score</option>
                      <option value="check">Check</option>
                      <option value="notes">Notes</option>
                    </select>
                  </label>
                  <label
                    id="new-calendar-display-field"
                    class="calendar-add-field"
                    for="new-calendar-display"
                    hidden
                  >
                    <span class="calendar-add-field-label">Display</span>
                    <select id="new-calendar-display" class="calendar-add-select">
                      <option value="number">Number</option>
                      <option value="heatmap">Heatmap</option>
                      <option value="number-heatmap">Number + Heatmap</option>
                    </select>
                  </label>
                  <div class="calendar-add-field" aria-label="Color">
                    <span class="calendar-add-field-label">Color</span>
                    <div
                      id="new-calendar-color"
                      class="calendar-add-color-options"
                      role="radiogroup"
                      aria-label="Calendar color"
                    >
                      <button
                        type="button"
                        class="calendar-color-option is-active"
                        data-color="green"
                        aria-label="Green"
                        aria-pressed="true"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #22c55e"
                          aria-hidden="true"
                        ></span>
                      </button>
                      <button
                        type="button"
                        class="calendar-color-option"
                        data-color="red"
                        aria-label="Red"
                        aria-pressed="false"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #ef4444"
                          aria-hidden="true"
                        ></span>
                      </button>
                      <button
                        type="button"
                        class="calendar-color-option"
                        data-color="orange"
                        aria-label="Orange"
                        aria-pressed="false"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #f97316"
                          aria-hidden="true"
                        ></span>
                      </button>
                      <button
                        type="button"
                        class="calendar-color-option"
                        data-color="yellow"
                        aria-label="Yellow"
                        aria-pressed="false"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #facc15"
                          aria-hidden="true"
                        ></span>
                      </button>
                      <button
                        type="button"
                        class="calendar-color-option"
                        data-color="cyan"
                        aria-label="Cyan"
                        aria-pressed="false"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #22d3ee"
                          aria-hidden="true"
                        ></span>
                      </button>
                      <button
                        type="button"
                        class="calendar-color-option"
                        data-color="blue"
                        aria-label="Blue"
                        aria-pressed="false"
                      >
                        <span
                          class="calendar-color-dot"
                          style="--color-dot: #3b82f6"
                          aria-hidden="true"
                        ></span>
                      </button>
                    </div>
                  </div>
                  <div class="calendar-add-actions">
                    <button
                      id="calendar-add-submit"
                      type="button"
                      class="calendar-option calendar-action-btn"
                      aria-label="Add"
                    >
                      Add
                    </button>
                    <button
                      type="button"
                      id="calendar-add-cancel"
                      class="calendar-option calendar-action-btn"
                      aria-label="Cancel"
                    >
                      Cancel
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="calendar-options-divider calendar-edit-divider"
              aria-hidden="true"
            ></div>
            <div id="calendar-edit-shell" class="calendar-edit-shell">
              <button
                id="calendar-edit-trigger"
                type="button"
                class="calendar-option calendar-option-action calendar-edit-trigger"
                data-calendar-action="edit"
                aria-label="Edit"
              >
                <span class="calendar-option-icon" aria-hidden="true"></span>
                <span class="calendar-option-label">Edit</span>
              </button>
              <div
                id="calendar-edit-editor"
                class="calendar-edit-editor"
                aria-label="Edit Calendar"
              >
                <div id="calendar-edit-form" class="calendar-edit-form" aria-hidden="false">
                  <div class="calendar-add-panel">
                    <p class="calendar-add-title">Edit Calendar</p>
                    <label class="calendar-add-field" for="edit-calendar-name">
                      <span class="calendar-add-field-label">Name</span>
                      <input
                        id="edit-calendar-name"
                        class="calendar-add-input"
                        type="text"
                        placeholder="Calendar name"
                        autocomplete="off"
                      />
                    </label>
                    <label
                      id="edit-calendar-display-field"
                      class="calendar-add-field"
                      for="edit-calendar-display"
                      hidden
                    >
                      <span class="calendar-add-field-label">Display</span>
                      <select id="edit-calendar-display" class="calendar-add-select">
                        <option value="number">Number</option>
                        <option value="heatmap">Heatmap</option>
                        <option value="number-heatmap">Number + Heatmap</option>
                      </select>
                    </label>
                    <div class="calendar-add-field" aria-label="Color">
                      <span class="calendar-add-field-label">Color</span>
                      <div
                        id="edit-calendar-color"
                        class="calendar-add-color-options"
                        role="radiogroup"
                        aria-label="Calendar color"
                      >
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="green"
                          aria-label="Green"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #22c55e"
                            aria-hidden="true"
                          ></span>
                        </button>
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="red"
                          aria-label="Red"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #ef4444"
                            aria-hidden="true"
                          ></span>
                        </button>
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="orange"
                          aria-label="Orange"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #f97316"
                            aria-hidden="true"
                          ></span>
                        </button>
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="yellow"
                          aria-label="Yellow"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #facc15"
                            aria-hidden="true"
                          ></span>
                        </button>
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="cyan"
                          aria-label="Cyan"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #22d3ee"
                            aria-hidden="true"
                          ></span>
                        </button>
                        <button
                          type="button"
                          class="calendar-color-option"
                          data-color="blue"
                          aria-label="Blue"
                          aria-pressed="false"
                        >
                          <span
                            class="calendar-color-dot"
                            style="--color-dot: #3b82f6"
                            aria-hidden="true"
                          ></span>
                        </button>
                      </div>
                    </div>
                    <div class="calendar-add-actions calendar-edit-actions">
                      <button
                        id="calendar-edit-save"
                        type="button"
                        class="calendar-option calendar-action-btn"
                        aria-label="Save"
                      >
                        Save
                      </button>
                      <button
                        type="button"
                        id="calendar-edit-cancel"
                        class="calendar-option calendar-action-btn"
                        aria-label="Cancel"
                      >
                        Cancel
                      </button>
                      <button
                        type="button"
                        id="calendar-edit-delete"
                        class="calendar-option calendar-action-btn calendar-edit-delete-btn"
                        aria-label="Delete"
                      >
                        <svg
                          class="calendar-edit-delete-icon"
                          viewBox="0 0 24 24"
                          aria-hidden="true"
                          focusable="false"
                        >
                          <path d="M9 3h6" />
                          <path d="M5 7h14" />
                          <path d="M8 7v11a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V7" />
                          <path d="M10 11v5" />
                          <path d="M14 11v5" />
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
                <div
                  id="calendar-delete-confirm"
                  class="calendar-delete-confirm"
                  aria-label="Delete Calendar"
                  aria-hidden="true"
                >
                  <div class="calendar-add-panel calendar-delete-panel">
                    <p class="calendar-delete-message">
                       Remove <span id="calendar-delete-name" class="calendar-delete-name"></span> ? 
                    </p>
                    <label class="calendar-add-field" for="calendar-delete-confirm-input">
                      <span class="calendar-add-field-label">Type Name To Confirm</span>
                      <input
                        id="calendar-delete-confirm-input"
                        class="calendar-add-input"
                        type="text"
                        placeholder="Calendar name"
                        autocomplete="off"
                        autocapitalize="off"
                        autocorrect="off"
                        spellcheck="false"
                      />
                    </label>
                    <div class="calendar-add-actions calendar-delete-actions">
                      <button
                        id="calendar-delete-confirm-remove"
                        type="button"
                        class="calendar-option calendar-action-btn calendar-delete-remove-btn"
                        aria-label="Remove"
                      >
                        Remove
                      </button>
                      <button
                        type="button"
                        id="calendar-delete-confirm-cancel"
                        class="calendar-option calendar-action-btn"
                        aria-label="Cancel"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <span class="tooltip-target tooltip-bottom" data-tooltip="Calendar Options">
            <button
              id="header-calendars-btn"
              type="button"
              aria-label="Energy Tracker"
              aria-expanded="false"
            >
              <span
                class="calendar-option-type-icon calendar-current-type-icon is-signal"
                aria-hidden="true"
                style="--calendar-type-icon-color: #3b82f6"
              ></span>
              <span class="calendar-current-name">Energy Tracker</span>
            </button>
          </span>
        </div>
      </header>
      <section id="tweak-controls" aria-label="Day selection controls" hidden>
        <h2 class="tweak-controls-title">Debug Parameters</h2>
        <button
          id="tweak-controls-close"
          class="tweak-controls-close"
          type="button"
          aria-label="Close debug parameters"
        >
          
        </button>
        <label class="tweak-control" for="selection-camera-zoom">
          <span>Cell Zoom</span>
          <input
            id="selection-camera-zoom"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="3"
          />
          <output id="selection-camera-zoom-value" for="selection-camera-zoom"
            >3.00x</output
          >
        </label>
        <label class="tweak-control" for="selection-expand-x">
          <span>Expand X</span>
          <input
            id="selection-expand-x"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="2.6"
          />
          <output id="selection-expand-x-value" for="selection-expand-x"
            >2.60x</output
          >
        </label>
        <label class="tweak-control" for="selection-expand-y">
          <span>Expand Y</span>
          <input
            id="selection-expand-y"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="2.6"
          />
          <output id="selection-expand-y-value" for="selection-expand-y"
            >2.60x</output
          >
        </label>
        <label class="tweak-control" for="selection-fade-delta">
          <span>Fade Delta</span>
          <input
            id="selection-fade-delta"
            type="range"
            min="0"
            max="100"
            step="0.05"
            value="25"
          />
          <output id="selection-fade-delta-value" for="selection-fade-delta"
            >25.00x</output
          >
        </label>
      </section>
      <main id="calendar-scroll" aria-label="Infinite calendar months"></main>
    </div>
    <button
      id="return-to-current"
      type="button"
      aria-label="Back to current month"
      class="tooltip-target tooltip-left"
      data-tooltip="Back to current month"
      aria-hidden="true"
    >
      <svg class="up-icon" viewBox="0 0 24 24" aria-hidden="true">
        <line x1="12" y1="18" x2="12" y2="6" />
        <polyline points="7.5 10.5 12 6 16.5 10.5" />
      </svg>
    </button>
    <button id="mobile-debug-toggle" type="button">Debug</button>
    <div id="theme-switcher">
      <div id="theme-options" aria-label="Theme options">
        <p class="theme-options-title">Themes</p>
        <button
          type="button"
          class="theme-option"
          data-theme-option="dark"
          aria-label="Dark Theme"
        >
          Dark Theme
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="tokyo-night-storm"
          aria-label="Tokyo Night Storm"
        >
          Tokyo Night Storm
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="solarized-dark"
          aria-label="Solarized Dark"
        >
          Solarized Dark
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="solarized-light"
          aria-label="Solarized Light"
        >
          Solarized Light
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="light"
          aria-label="Light Theme"
        >
          Light Theme
        </button>
      </div>
      <button
        id="theme-toggle"
        type="button"
        aria-label="Open Themes"
        aria-expanded="false"
        class="tooltip-target tooltip-left"
        data-tooltip="Open Themes"
      >
        <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M12 3.5c-4.97 0-9 3.8-9 8.5 0 2.9 2.35 5.25 5.25 5.25H10a1 1 0 0 1 1 1V20a1.5 1.5 0 0 0 1.5 1.5C17.2 21.5 21 17.7 21 13c0-5.25-4.03-9.5-9-9.5Z"
          />
          <circle cx="7.5" cy="11" r="0.9" fill="currentColor" />
          <circle cx="10.5" cy="8.5" r="0.9" fill="currentColor" />
          <circle cx="14" cy="8.3" r="0.9" fill="currentColor" />
          <circle cx="16.5" cy="11" r="0.9" fill="currentColor" />
        </svg>
        <svg class="close-icon" viewBox="0 0 24 24" aria-hidden="true">
          <line x1="6.5" y1="6.5" x2="17.5" y2="17.5" />
          <line x1="17.5" y1="6.5" x2="6.5" y2="17.5" />
        </svg>
      </button>
    </div>
    <a
      id="github-link"
      href="https://github.com/AndredAlmeida/justcal.ai"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Open justcal.ai on GitHub"
      class="tooltip-target tooltip-left"
      data-tooltip="View on GitHub"
    >
      <svg class="github-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M9 19c-4 1.5-5-1.5-7-2m14 4v-3.8a3.35 3.35 0 0 0-.95-2.6c3.2-.35 6.55-1.6 6.55-7.1a5.5 5.5 0 0 0-1.5-3.8 5.1 5.1 0 0 0-.1-3.75s-1.2-.4-4 1.5a13.8 13.8 0 0 0-7 0c-2.8-1.9-4-1.5-4-1.5a5.1 5.1 0 0 0-.1 3.75 5.5 5.5 0 0 0-1.5 3.8c0 5.45 3.35 6.75 6.55 7.1a3.35 3.35 0 0 0-.95 2.6V21"
        />
      </svg>
    </a>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
