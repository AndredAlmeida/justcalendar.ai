<!doctype html>
<html lang="en" class="dark tokyo-night-storm">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#0f1224" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <link rel="apple-touch-icon" href="/icon.svg" />
    <title>Just Calendar</title>
    <style>
      :root {
        --panel: #ffffff;
        --ink: #111827;
        --line: #d4dae4;
        --muted: #eef2f8;
        --bg-top: #f8fafc;
        --bg-bottom: #edf2f9;
        --header-bg: rgba(255, 255, 255, 0.86);
        --card-shadow: 0 8px 22px rgba(15, 23, 42, 0.06);
        color-scheme: light;
      }

      :root.dark {
        --panel: #0f172a;
        --ink: #e5e7eb;
        --line: #334155;
        --muted: #1e293b;
        --bg-top: #020617;
        --bg-bottom: #0f172a;
        --header-bg: rgba(2, 6, 23, 0.8);
        --card-shadow: 0 10px 25px rgba(2, 6, 23, 0.5);
        color-scheme: dark;
      }

      :root.tokyo-night-storm {
        --panel: #1a1d33;
        --ink: #dde4ff;
        --line: #3a466d;
        --muted: #252b48;
        --bg-top: #0f1224;
        --bg-bottom: #171c34;
        --header-bg: rgba(15, 18, 36, 0.84);
        --card-shadow: 0 10px 25px rgba(8, 11, 24, 0.58);
        color-scheme: dark;
      }

      :root.solarized-dark {
        --panel: #073642;
        --ink: #93a1a1;
        --line: #586e75;
        --muted: #002b36;
        --bg-top: #002b36;
        --bg-bottom: #001f27;
        --header-bg: rgba(0, 43, 54, 0.88);
        --card-shadow: 0 10px 28px rgba(0, 24, 30, 0.7);
        color-scheme: dark;
      }

      :root.solarized-light {
        --panel: #fdf6e3;
        --ink: #586e75;
        --line: #93a1a1;
        --muted: #eee8d5;
        --bg-top: #fdf6e3;
        --bg-bottom: #eee8d5;
        --header-bg: rgba(253, 246, 227, 0.9);
        --card-shadow: 0 8px 22px rgba(88, 110, 117, 0.16);
        color-scheme: light;
      }

      * {
        box-sizing: border-box;
      }

      html {
        background-color: var(--bg-bottom);
        overflow: hidden;
      }

      body {
        margin: 0;
        min-height: 100vh;
        min-height: 100svh;
        overflow: hidden;
        font-family: "Segoe UI", Arial, sans-serif;
        color: var(--ink);
        background-color: var(--bg-bottom);
        background-image: linear-gradient(
          180deg,
          var(--bg-top) 0%,
          var(--bg-bottom) 100%
        );
      }

      #app {
        height: 100vh;
        height: 100svh;
        display: grid;
        grid-template-rows: auto auto 1fr;
      }

      header {
        position: relative;
        z-index: 40;
        padding: 0.85rem 1rem;
        border-bottom: 1px solid var(--line);
        background: var(--header-bg);
        backdrop-filter: blur(6px);
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .brand-logo {
        display: block;
        width: auto;
        height: 2rem;
        max-width: min(68vw, 18rem);
        object-fit: contain;
      }

      #calendar-switcher {
        margin-left: auto;
        position: relative;
        z-index: 44;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        min-width: 2.1rem;
      }

      #header-calendars-btn {
        margin-left: 0;
        height: 2rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0 0.72rem;
        font-size: 0.7rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: var(--panel);
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          transform 0.16s ease,
          color 0.16s ease;
      }

      #theme-switcher {
        position: fixed;
        right: 1rem;
        bottom: 3.9rem;
        z-index: 21;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        min-width: 2.1rem;
      }

      #tweak-controls {
        width: min(920px, calc(100% - 1.3rem));
        margin: 0 auto;
        padding: 0.6rem 0.75rem;
        border: 1px solid var(--line);
        border-radius: 18px;
        background: var(--panel);
        box-shadow: var(--card-shadow);
        display: grid;
        gap: 0.45rem;
        position: fixed;
        left: 0;
        right: 0;
        bottom: calc(env(safe-area-inset-bottom, 0px) + 0.55rem);
        z-index: 120;
        transform: translateY(0);
        opacity: 1;
        transition:
          transform 0.24s cubic-bezier(0.22, 0.61, 0.36, 1),
          opacity 0.2s ease;
      }

      #tweak-controls.is-entering {
        opacity: 0;
        transform: translateY(calc(100% + 1.5rem));
      }

      #tweak-controls[hidden] {
        display: none;
      }

      .tweak-controls-title {
        margin: 0;
        font-size: 0.76rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--ink);
      }

      .tweak-controls-close {
        display: none;
        position: absolute;
        top: 0.46rem;
        right: 0.48rem;
        width: 1.8rem;
        height: 1.8rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        background: var(--panel);
        color: var(--ink);
        font-size: 1rem;
        font-weight: 700;
        line-height: 1;
        padding: 0;
        cursor: pointer;
      }

      .tweak-controls-close:active {
        transform: scale(0.97);
      }

      .tweak-controls-close:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .tweak-control {
        display: grid;
        grid-template-columns: 4.9rem 1fr 2.8rem;
        align-items: center;
        gap: 0.55rem;
        font-size: 0.8rem;
        font-weight: 600;
      }

      .tweak-control input[type="range"] {
        width: 100%;
        margin: 0;
      }

      .tweak-control output {
        text-align: right;
        font-variant-numeric: tabular-nums;
      }

      #calendar-scroll {
        --canvas-gap: 1rem;
        overflow-y: auto;
        padding: 1rem;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }

      #calendar-scroll.is-zoomed {
        overflow: hidden;
      }

      #calendar-canvas {
        position: relative;
        min-width: 100%;
        display: grid;
        gap: var(--canvas-gap);
        align-content: start;
        transform-origin: 0 0;
        transition: transform 0.24s ease-in-out;
      }

      #calendar-scroll::-webkit-scrollbar {
        width: 0;
        height: 0;
        display: none;
      }

      .month-card {
        width: min(920px, 100%);
        margin: 0 auto;
        border: 0;
        border-radius: 14px;
        background: var(--panel);
        padding: 0.75rem;
        box-shadow: var(--card-shadow);
      }

      .month-title {
        margin: 0 0 0.7rem;
        font-size: 1.05rem;
      }

      .month-table-shell {
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid var(--line);
        background: var(--panel);
      }

      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        table-layout: fixed;
        transition: height 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      col {
        transition: width 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      th,
      td {
        border-right: 1px solid var(--line);
        border-bottom: 1px solid var(--line);
        height: calc(2.6rem * 1.4);
      }

      th:last-child,
      td:last-child {
        border-right: 0;
      }

      tbody tr:last-child td {
        border-bottom: 0;
      }

      tbody tr {
        transition: height 0.14s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      th {
        background: var(--muted);
        text-align: center;
        font-size: 0.78rem;
        font-weight: 700;
      }

      td {
        background: var(--panel);
        text-align: left;
        vertical-align: top;
        padding: 0.24rem 0.36rem;
        font-size: 0.9rem;
        font-weight: 600;
      }

      td.empty {
        background: var(--muted);
        color: #a6acb8;
        font-weight: 400;
      }

      td.day-cell {
        position: relative;
        overflow: hidden;
        cursor: pointer;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        transition:
          background-color 0.24s ease,
          color 0.24s ease,
          box-shadow 0.24s ease;
      }

      .day-cell-content {
        min-height: 100%;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 0.16rem;
        transform-origin: top left;
        transition: transform 0.22s ease-in-out;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day {
        z-index: 4;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day .day-cell-content {
        transform: scale(1.2);
      }

      .day-close-btn {
        position: absolute;
        top: 0.26rem;
        right: 0.26rem;
        width: 1.38rem;
        height: 1.38rem;
        border: 1px solid rgba(51, 65, 85, 0.26);
        border-radius: 0.52rem;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.98) 0%,
          rgba(241, 245, 249, 0.9) 100%
        );
        color: #0f172a;
        display: inline-grid;
        place-items: center;
        padding: 0;
        font-size: 0.72rem;
        font-weight: 800;
        line-height: 1;
        font-family: "Trebuchet MS", "Avenir Next", "Segoe UI", sans-serif;
        opacity: 0;
        pointer-events: none;
        cursor: pointer;
        z-index: 6;
        transform: translateY(-2px) scale(0.9);
        backdrop-filter: blur(3px);
        transition:
          opacity 0.16s ease,
          transform 0.18s ease,
          background-color 0.16s ease,
          border-color 0.16s ease;
      }

      .day-close-btn:hover {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 1) 0%,
          rgba(248, 250, 252, 0.96) 100%
        );
        transform: translateY(-1px) scale(1.02);
      }

      .day-close-btn:active {
        transform: translateY(0) scale(0.98);
      }

      .day-close-btn:focus-visible {
        outline: 2px solid #60a5fa;
        outline-offset: 1px;
      }

      #calendar-scroll.is-zoomed td.day-cell.selected-day .day-close-btn {
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0) scale(1);
      }

      .day-number {
        line-height: 1;
        font-variant-numeric: tabular-nums;
      }

      .day-state-row {
        display: inline-flex;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        justify-content: center;
        align-items: center;
        gap: 0.24rem;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
      }

      td.day-cell.selected-day .day-state-row {
        opacity: 1;
        pointer-events: auto;
      }

      td.day-cell::after {
        content: "";
        position: absolute;
        top: 0.22rem;
        right: 0.22rem;
        width: 0.45rem;
        height: 0.45rem;
        border-radius: 999px;
        opacity: 0;
        transform: scale(0.78);
        transition:
          opacity 0.2s ease,
          transform 0.2s ease,
          background-color 0.2s ease;
      }

      td.day-cell[data-day-state="red"]:not(.selected-day)::after,
      td.day-cell[data-day-state="yellow"]:not(.selected-day)::after,
      td.day-cell[data-day-state="green"]:not(.selected-day)::after {
        opacity: 1;
        transform: scale(1);
      }

      td.day-cell[data-day-state="red"]:not(.selected-day)::after {
        background: hsl(0 88% 62%);
      }

      td.day-cell[data-day-state="yellow"]:not(.selected-day)::after {
        background: hsl(48 88% 58%);
      }

      td.day-cell[data-day-state="green"]:not(.selected-day)::after {
        background: hsl(142 88% 48%);
      }

      td.day-cell:hover:not(.selected-day):not(.today-cell) {
        background: rgba(29, 78, 216, 0.1);
      }

      td.day-cell.today-cell:not(.selected-day) {
        box-shadow: inset 0 0 0 2px #3b82f6;
      }

      .day-state-btn {
        width: 2.01rem;
        height: 2.01rem;
        border-radius: 999px;
        border: 1px solid var(--line);
        padding: 0;
        display: inline-grid;
        place-items: center;
        background: var(--panel);
        color: #334155;
        font-size: 0.71rem;
        font-weight: 700;
        line-height: 1;
        cursor: pointer;
        opacity: 1;
        transition:
          opacity 0.2s ease,
          box-shadow 0.2s ease,
          background-color 0.2s ease,
          border-color 0.2s ease,
          color 0.2s ease;
      }

      .day-state-btn:not(.is-active) {
        opacity: 1;
      }

      .day-state-btn.is-active {
        opacity: 1;
        box-shadow: 0 0 0 2px #ffffff, 0 0 0 3px rgba(15, 23, 42, 0.32);
      }

      .day-state-btn.day-state-x {
        background: #cbd5e1;
        border-color: #94a3b8;
        color: #334155;
      }

      .day-state-btn.day-state-red {
        background: hsl(0 88% 62%);
        border-color: hsl(0 88% 44%);
      }

      .day-state-btn.day-state-yellow {
        background: hsl(48 88% 58%);
        border-color: hsl(48 88% 41%);
      }

      .day-state-btn.day-state-green {
        background: hsl(142 88% 48%);
        border-color: hsl(142 88% 36%);
      }

      td.day-cell.selected-day {
        background: #93c5fd;
        color: #0b2840;
      }

      #return-to-current,
      #theme-toggle,
      #mobile-debug-toggle {
        width: 2.1rem;
        height: 2.1rem;
        display: inline-grid;
        place-items: center;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0;
        font-size: 1.05rem;
        font-weight: 600;
        line-height: 1;
        color: var(--line);
        background: var(--panel);
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        transition: transform 0.15s ease;
      }

      #mobile-debug-toggle {
        position: fixed;
        left: 1rem;
        bottom: 1rem;
        width: auto;
        min-width: 4.4rem;
        padding: 0 0.72rem;
        font-size: 0.64rem;
        letter-spacing: 0.01em;
        color: var(--ink);
        z-index: 21;
        display: none;
      }

      #github-link {
        position: fixed;
        right: 1rem;
        bottom: 1rem;
        width: 2.25rem;
        height: 2.25rem;
        display: inline-grid;
        place-items: center;
        border: 1px solid var(--line);
        border-radius: 999px;
        color: var(--ink);
        background: var(--panel);
        box-shadow: 0 6px 16px rgba(15, 23, 42, 0.18);
        text-decoration: none;
        z-index: 20;
        transition:
          transform 0.15s ease,
          box-shadow 0.15s ease;
      }

      #return-to-current {
        position: fixed;
        right: max(0.25rem, calc((100vw - 920px) / 2 - 2.6rem));
        top: calc(env(safe-area-inset-top, 0px) + 5rem);
        z-index: 21;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transform: translateY(6px);
        transition:
          opacity 0.22s ease,
          transform 0.22s ease,
          visibility 0s linear 0.22s;
      }

      #return-to-current.is-visible {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        transform: translateY(0);
        transition:
          opacity 0.22s ease,
          transform 0.22s ease,
          visibility 0s;
      }

      #theme-toggle {
        margin-left: 0;
        position: relative;
        z-index: 2;
      }

      #calendar-options {
        position: absolute;
        right: 0;
        top: calc(100% + 0.42rem);
        transform: translateY(-0.28rem);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.34rem;
        width: min(11.25rem, 68vw);
        padding: 0.28rem;
        border: 1px solid var(--line);
        border-radius: 20px;
        background: var(--panel);
        box-shadow: 0 8px 20px rgba(15, 23, 42, 0.22);
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 48;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      #calendar-switcher.is-expanded #calendar-options {
        max-height: 8.7rem;
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      #calendar-switcher.is-expanded.is-adding #calendar-options {
        max-height: 22rem;
      }

      .calendar-option {
        height: 2.1rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0 0.48rem;
        font-size: 0.64rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: var(--panel);
        white-space: nowrap;
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        width: 100%;
        text-align: center;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          transform 0.16s ease,
          color 0.16s ease,
          opacity 0.16s ease;
      }

      .calendar-option:hover {
        transform: translateY(-1px);
      }

      .calendar-option:active {
        transform: translateY(0);
      }

      .calendar-option:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .calendar-option.is-active {
        background: var(--muted);
        border-color: #3b82f6;
      }

      .calendar-add-shell {
        display: grid;
        gap: 0.34rem;
      }

      .calendar-add-trigger {
        max-height: 2.1rem;
        overflow: hidden;
        transition:
          max-height 0.22s ease,
          opacity 0.18s ease,
          padding 0.18s ease,
          border-width 0.18s ease,
          box-shadow 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-add-editor {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        transform: translateY(-0.2rem);
        padding: 0 0.14rem;
        display: grid;
        gap: 0.38rem;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      .calendar-add-shell.is-editing .calendar-add-trigger {
        max-height: 0;
        opacity: 0;
        pointer-events: none;
        padding-top: 0;
        padding-bottom: 0;
        border-width: 0;
        box-shadow: none;
        transform: scale(0.98);
      }

      .calendar-add-shell.is-editing .calendar-add-editor {
        max-height: 18rem;
        opacity: 1;
        pointer-events: auto;
        transform: translateY(0);
      }

      .calendar-add-title {
        margin: 0;
        font-size: 0.66rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--ink);
        opacity: 0.82;
      }

      .calendar-add-field {
        display: grid;
        gap: 0.2rem;
      }

      .calendar-add-field-label {
        font-size: 0.56rem;
        font-weight: 700;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: var(--ink);
        opacity: 0.78;
      }

      .calendar-add-input,
      .calendar-add-select {
        height: 1.95rem;
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 0 0.56rem;
        font-size: 0.66rem;
        font-weight: 600;
        color: var(--ink);
        background: var(--panel);
      }

      .calendar-add-input::placeholder {
        color: var(--line);
      }

      .calendar-add-select {
        cursor: pointer;
      }

      .calendar-add-actions {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.34rem;
      }

      .calendar-action-btn {
        height: 1.95rem;
      }

      #calendar-switcher.is-expanded #header-calendars-btn {
        background: var(--muted);
      }

      #theme-options {
        position: absolute;
        right: 0;
        top: auto;
        bottom: calc(100% + 0.42rem);
        transform: translateY(0.28rem);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.34rem;
        width: min(11.25rem, 68vw);
        padding: 0.28rem;
        border: 1px solid var(--line);
        border-radius: 20px;
        background: var(--panel);
        box-shadow: 0 8px 20px rgba(15, 23, 42, 0.22);
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        pointer-events: none;
        z-index: 48;
        transition:
          max-height 0.24s ease,
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      #theme-switcher.is-expanded #theme-options {
        max-height: 13rem;
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      .theme-options-title {
        margin: 0 0 0.08rem;
        padding: 0;
        font-size: 0.62rem;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--ink);
        opacity: 0.8;
        text-align: center;
      }

      .theme-option {
        height: 2.1rem;
        border: 1px solid var(--line);
        border-radius: 999px;
        padding: 0 0.48rem;
        font-size: 0.64rem;
        font-weight: 700;
        letter-spacing: 0.01em;
        color: var(--ink);
        background: var(--panel);
        white-space: nowrap;
        box-shadow: 0 2px 8px rgba(15, 23, 42, 0.12);
        cursor: pointer;
        width: 100%;
        text-align: center;
        transition:
          background-color 0.16s ease,
          border-color 0.16s ease,
          transform 0.16s ease,
          color 0.16s ease,
          opacity 0.16s ease;
      }

      .theme-option:hover {
        transform: translateY(-1px);
      }

      .theme-option:active {
        transform: translateY(0);
      }

      .theme-option:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .theme-option.is-active {
        background: var(--muted);
        border-color: #3b82f6;
      }

      .theme-option:disabled,
      .theme-option.is-future {
        opacity: 0.58;
        cursor: default;
      }

      #theme-switcher.is-expanded #theme-toggle {
        background: var(--muted);
      }

      #header-calendars-btn:hover {
        transform: translateY(-1px);
      }

      #header-calendars-btn:active {
        transform: translateY(0);
      }

      #header-calendars-btn:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .tooltip-target {
        position: relative;
      }

      .tooltip-target::after {
        position: absolute;
        left: 50%;
        opacity: 0;
        pointer-events: none;
        z-index: 60;
        transition:
          opacity 0.18s ease,
          transform 0.18s ease;
      }

      .tooltip-target::after {
        content: attr(data-tooltip);
        bottom: calc(100% + 0.56rem);
        transform: translate(-50%, 4px);
        padding: 0.34rem 0.48rem;
        border-radius: 9px;
        border: 0;
        background: rgba(71, 85, 105, 0.3);
        color: rgba(248, 250, 252, 0.4);
        white-space: nowrap;
        font-size: 0.69rem;
        line-height: 1;
        font-weight: 600;
        box-shadow: 0 8px 18px rgba(2, 6, 23, 0.35);
        z-index: 61;
      }

      :root:not(.dark) .tooltip-target::after {
        color: rgba(15, 23, 42, 0.72);
      }

      .tooltip-target:hover::after,
      .tooltip-target:focus-visible::after {
        opacity: 1;
        transform: translate(-50%, 0);
      }

      .tooltip-target.tooltip-left::after {
        left: auto;
        bottom: auto;
        top: 50%;
      }

      .tooltip-target.tooltip-left::after {
        right: calc(100% + 0.56rem);
        transform: translate(-4px, -50%);
      }

      .tooltip-target.tooltip-left:hover::after,
      .tooltip-target.tooltip-left:focus-visible::after {
        transform: translate(0, -50%);
      }

      #return-to-current svg,
      #theme-toggle svg {
        pointer-events: none;
      }

      .theme-icon {
        width: 1rem;
        height: 1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.3;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      .close-icon {
        width: 1rem;
        height: 1rem;
        display: none;
        fill: none;
        stroke: currentColor;
        stroke-width: 2.05;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      #theme-switcher.is-expanded .theme-icon {
        display: none;
      }

      #theme-switcher.is-expanded .close-icon {
        display: block;
      }

      .up-icon {
        width: 1rem;
        height: 1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.9;
        stroke-linecap: round;
        stroke-linejoin: round;
        transition: transform 0.22s ease;
      }

      #return-to-current.is-down .up-icon {
        transform: rotate(180deg);
      }

      #return-to-current:hover,
      #theme-toggle:hover,
      #mobile-debug-toggle:hover {
        transform: translateY(-1px);
      }

      #github-link:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 22px rgba(15, 23, 42, 0.24);
      }

      #return-to-current:active,
      #theme-toggle:active,
      #mobile-debug-toggle:active {
        transform: translateY(0);
      }

      #github-link:active {
        transform: translateY(0);
      }

      #return-to-current:focus-visible,
      #theme-toggle:focus-visible,
      #mobile-debug-toggle:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      #github-link:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      .github-icon {
        width: 1.1rem;
        height: 1.1rem;
        display: block;
        fill: none;
        stroke: currentColor;
        stroke-width: 1.8;
        stroke-linecap: round;
        stroke-linejoin: round;
      }

      :root.dark td.empty {
        color: #96a4ba;
      }

      :root.dark td.day-cell:hover:not(.selected-day):not(.today-cell) {
        background: rgba(30, 64, 175, 0.3);
      }

      :root.dark td.day-cell.today-cell:not(.selected-day) {
        box-shadow: inset 0 0 0 2px #60a5fa;
      }

      :root.dark .day-state-btn.day-state-x {
        background: #475569;
        border-color: #64748b;
        color: #e2e8f0;
      }

      :root.dark .day-state-btn.day-state-red {
        background: hsl(0 88% 62%);
        border-color: hsl(0 88% 44%);
      }

      :root.dark .day-state-btn.day-state-yellow {
        background: hsl(48 88% 58%);
        border-color: hsl(48 88% 41%);
      }

      :root.dark .day-state-btn.day-state-green {
        background: hsl(142 88% 48%);
        border-color: hsl(142 88% 36%);
      }

      :root.dark .day-state-btn.is-active {
        box-shadow: 0 0 0 2px #ffffff, 0 0 0 3px rgba(2, 6, 23, 0.82);
      }

      :root.dark td.day-cell.selected-day {
        background: #2563eb;
        color: #dbeafe;
      }

      :root.dark .day-close-btn {
        border-color: rgba(148, 163, 184, 0.34);
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.92) 0%,
          rgba(30, 41, 59, 0.84) 100%
        );
        color: #f1f5f9;
      }

      :root.dark .day-close-btn:hover {
        background: linear-gradient(
          180deg,
          rgba(30, 41, 59, 0.96) 0%,
          rgba(51, 65, 85, 0.88) 100%
        );
      }

      :root.dark #github-link {
        box-shadow: 0 8px 20px rgba(2, 6, 23, 0.6);
      }

      @media (max-width: 640px) {
        #calendar-scroll {
          --canvas-gap: 0.75rem;
          padding: 0.65rem;
        }

        #tweak-controls {
          width: calc(100% - 1.3rem);
          padding: 0.55rem 2.65rem 0.55rem 0.6rem;
          bottom: calc(env(safe-area-inset-bottom, 0px) + 0.5rem);
        }

        .tweak-controls-close {
          display: inline-grid;
          place-items: center;
        }

        .tweak-control {
          grid-template-columns: 4.2rem 1fr 2.45rem;
          gap: 0.5rem;
          font-size: 0.75rem;
        }

        .brand-logo {
          height: 1.8rem;
          max-width: 70vw;
        }

        #header-calendars-btn {
          height: 1.85rem;
          padding: 0 0.62rem;
          font-size: 0.65rem;
        }

        .month-card {
          border-radius: 10px;
          padding: 0.55rem;
        }

        .month-table-shell {
          border-radius: 10px;
        }

        th,
        td {
          height: calc(2.2rem * 1.4);
          font-size: 0.82rem;
        }

        td {
          padding: 0.2rem 0.3rem;
        }

        .day-cell-content {
          gap: 0.14rem;
        }

        .day-state-btn {
          width: 0.9rem;
          height: 0.9rem;
          font-size: 0.48rem;
        }

        .day-state-row {
          gap: 0.2rem;
        }

        .day-close-btn {
          width: 1.2rem;
          height: 1.2rem;
          font-size: 0.64rem;
          border-radius: 0.46rem;
        }

        #return-to-current,
        #theme-toggle {
          width: 2rem;
          height: 2rem;
          font-size: 0.98rem;
        }

        #mobile-debug-toggle {
          display: inline-grid;
          left: 0.75rem;
          bottom: 0.75rem;
          min-width: 3.75rem;
          height: 2.05rem;
          padding: 0 0.56rem;
          font-size: 0.58rem;
        }

        #theme-switcher {
          right: 0.75rem;
          bottom: 3.2rem;
          min-width: 2rem;
        }

        #calendar-switcher {
          min-width: 2rem;
        }

        #calendar-switcher.is-expanded #calendar-options {
          width: min(10.25rem, 62vw);
          max-height: 8.2rem;
        }

        #calendar-switcher.is-expanded.is-adding #calendar-options {
          max-height: 21rem;
        }

        #theme-switcher.is-expanded #theme-options {
          width: min(10.25rem, 62vw);
          max-height: 12rem;
        }

        .calendar-option,
        .theme-option {
          height: 2rem;
          font-size: 0.58rem;
          padding: 0 0.36rem;
        }

        .calendar-add-input,
        .calendar-add-select,
        .calendar-action-btn {
          height: 1.85rem;
        }

        .tooltip-target::after {
          font-size: 0.66rem;
        }

        #github-link {
          right: 0.75rem;
          bottom: 0.75rem;
          width: 2.05rem;
          height: 2.05rem;
        }

        #return-to-current {
          right: 0.75rem;
          top: calc(env(safe-area-inset-top, 0px) + 4.4rem);
        }

        .github-icon {
          width: 1rem;
          height: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <header>
        <img class="brand-logo" src="/logo-top.png" alt="Just Calendar" />
        <div id="calendar-switcher">
          <div id="calendar-options" aria-label="Calendar options">
            <button
              type="button"
              class="calendar-option is-active"
              data-calendar-type="signal-3"
              aria-label="Semaphore"
              aria-pressed="true"
            >
              Semaphore
            </button>
            <div id="calendar-add-shell" class="calendar-add-shell">
              <button
                id="calendar-add-trigger"
                type="button"
                class="calendar-option calendar-add-trigger"
                data-calendar-action="add"
                aria-label="Add Calendar"
              >
                Add Calendar
              </button>
              <div
                id="calendar-add-editor"
                class="calendar-add-editor"
                aria-label="New Calendar"
              >
                <p class="calendar-add-title">New Calendar</p>
                <label class="calendar-add-field" for="new-calendar-name">
                  <span class="calendar-add-field-label">Name</span>
                  <input
                    id="new-calendar-name"
                    class="calendar-add-input"
                    type="text"
                    placeholder="Calendar name"
                    autocomplete="off"
                  />
                </label>
                <label class="calendar-add-field" for="new-calendar-type">
                  <span class="calendar-add-field-label">Type</span>
                  <select id="new-calendar-type" class="calendar-add-select">
                    <option value="signal-3">Signal-3</option>
                    <option value="score">Score</option>
                  </select>
                </label>
                <div class="calendar-add-actions">
                  <button
                    type="button"
                    class="calendar-option calendar-action-btn"
                    aria-label="Add"
                  >
                    Add
                  </button>
                  <button
                    type="button"
                    id="calendar-add-cancel"
                    class="calendar-option calendar-action-btn"
                    aria-label="Cancel"
                  >
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button
            id="header-calendars-btn"
            type="button"
            aria-label="Calendars"
            aria-expanded="false"
          >
            Calendars
          </button>
        </div>
      </header>
      <section id="tweak-controls" aria-label="Day selection controls" hidden>
        <h2 class="tweak-controls-title">Debug Parameters</h2>
        <button
          id="tweak-controls-close"
          class="tweak-controls-close"
          type="button"
          aria-label="Close debug parameters"
        >
          Ã—
        </button>
        <label class="tweak-control" for="selection-camera-zoom">
          <span>Cell Zoom</span>
          <input
            id="selection-camera-zoom"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="1.68"
          />
          <output id="selection-camera-zoom-value" for="selection-camera-zoom"
            >1.68x</output
          >
        </label>
        <label class="tweak-control" for="selection-expand-x">
          <span>Expand X</span>
          <input
            id="selection-expand-x"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="1.68"
          />
          <output id="selection-expand-x-value" for="selection-expand-x"
            >1.68x</output
          >
        </label>
        <label class="tweak-control" for="selection-expand-y">
          <span>Expand Y</span>
          <input
            id="selection-expand-y"
            type="range"
            min="1"
            max="3"
            step="0.05"
            value="1.68"
          />
          <output id="selection-expand-y-value" for="selection-expand-y"
            >1.68x</output
          >
        </label>
      </section>
      <main id="calendar-scroll" aria-label="Infinite calendar months"></main>
    </div>
    <button
      id="return-to-current"
      type="button"
      aria-label="Back to current month"
      class="tooltip-target tooltip-left"
      data-tooltip="Back to current month"
      aria-hidden="true"
    >
      <svg class="up-icon" viewBox="0 0 24 24" aria-hidden="true">
        <line x1="12" y1="18" x2="12" y2="6" />
        <polyline points="7.5 10.5 12 6 16.5 10.5" />
      </svg>
    </button>
    <button id="mobile-debug-toggle" type="button">Debug</button>
    <div id="theme-switcher">
      <div id="theme-options" aria-label="Theme options">
        <p class="theme-options-title">Themes</p>
        <button
          type="button"
          class="theme-option"
          data-theme-option="dark"
          aria-label="Dark Theme"
        >
          Dark Theme
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="tokyo-night-storm"
          aria-label="Tokyo Night Storm"
        >
          Tokyo Night Storm
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="solarized-dark"
          aria-label="Solarized Dark"
        >
          Solarized Dark
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="solarized-light"
          aria-label="Solarized Light"
        >
          Solarized Light
        </button>
        <button
          type="button"
          class="theme-option"
          data-theme-option="light"
          aria-label="Light Theme"
        >
          Light Theme
        </button>
      </div>
      <button
        id="theme-toggle"
        type="button"
        aria-label="Open Themes"
        aria-expanded="false"
        class="tooltip-target tooltip-left"
        data-tooltip="Open Themes"
      >
        <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M12 3.5c-4.97 0-9 3.8-9 8.5 0 2.9 2.35 5.25 5.25 5.25H10a1 1 0 0 1 1 1V20a1.5 1.5 0 0 0 1.5 1.5C17.2 21.5 21 17.7 21 13c0-5.25-4.03-9.5-9-9.5Z"
          />
          <circle cx="7.5" cy="11" r="0.9" fill="currentColor" />
          <circle cx="10.5" cy="8.5" r="0.9" fill="currentColor" />
          <circle cx="14" cy="8.3" r="0.9" fill="currentColor" />
          <circle cx="16.5" cy="11" r="0.9" fill="currentColor" />
        </svg>
        <svg class="close-icon" viewBox="0 0 24 24" aria-hidden="true">
          <line x1="6.5" y1="6.5" x2="17.5" y2="17.5" />
          <line x1="17.5" y1="6.5" x2="6.5" y2="17.5" />
        </svg>
      </button>
    </div>
    <a
      id="github-link"
      href="https://github.com/AndredAlmeida/justcal.ai"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Open justcal.ai on GitHub"
      class="tooltip-target tooltip-left"
      data-tooltip="View on GitHub"
    >
      <svg class="github-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M9 19c-4 1.5-5-1.5-7-2m14 4v-3.8a3.35 3.35 0 0 0-.95-2.6c3.2-.35 6.55-1.6 6.55-7.1a5.5 5.5 0 0 0-1.5-3.8 5.1 5.1 0 0 0-.1-3.75s-1.2-.4-4 1.5a13.8 13.8 0 0 0-7 0c-2.8-1.9-4-1.5-4-1.5a5.1 5.1 0 0 0-.1 3.75 5.5 5.5 0 0 0-1.5 3.8c0 5.45 3.35 6.75 6.55 7.1a3.35 3.35 0 0 0-.95 2.6V21"
        />
      </svg>
    </a>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
